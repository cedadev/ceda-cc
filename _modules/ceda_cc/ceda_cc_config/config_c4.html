<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ceda_cc.ceda_cc_config.config_c4 &mdash; ceda-cc 1.3.1+ documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js?v=2b5c5e91"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            ceda-cc
          </a>
              <div class="version">
                1.3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"></div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">ceda-cc</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">ceda_cc.ceda_cc_config.config_c4</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for ceda_cc.ceda_cc_config.config_c4</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;config_c4</span>
<span class="sd">##########</span>
<span class="sd">USAGE:</span>
<span class="sd">import config_c4</span>

<span class="sd">This module sets some basic variables, including some vocabulary lists.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.</span><span class="w"> </span><span class="kn">import</span> <span class="n">utils_config</span> <span class="k">as</span> <span class="n">utils</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os.path</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">op</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">shutil</span><span class="o">,</span><span class="w"> </span><span class="nn">collections</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span>
<span class="c1">##from versionConfig import version, versionComment</span>

<span class="n">NT_project</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">namedtuple</span><span class="p">(</span> <span class="s1">&#39;project&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="s1">&#39;v&#39;</span><span class="p">]</span> <span class="p">)</span>
<span class="n">NT_fnParts</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">namedtuple</span><span class="p">(</span> <span class="s1">&#39;fnParts&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;len&#39;</span><span class="p">,</span><span class="s1">&#39;fxLen&#39;</span><span class="p">,</span><span class="s1">&#39;unfLen&#39;</span><span class="p">,</span><span class="s1">&#39;checkTLen&#39;</span><span class="p">,</span><span class="s1">&#39;ixDomain&#39;</span><span class="p">,</span><span class="s1">&#39;ixFreq&#39;</span><span class="p">]</span> <span class="p">)</span>

<span class="c1">##############################################################################</span>
<span class="c1"># Configure config-file paths</span>
<span class="c1">#</span>
<span class="c1"># All configuration directories, e.g. cmip5_vocabs, are looked for in a single</span>
<span class="c1"># parent directory.  This is the &quot;config&quot; directory within the package unless </span>
<span class="c1"># the environment variable CC_CONFIG_DIR is set.</span>

<span class="n">HERE</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
<span class="n">CC_CONFIG_DEFAULT_DIR</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">HERE</span><span class="p">,</span> <span class="s1">&#39;config&#39;</span><span class="p">)</span>
<span class="n">CC_CONFIG_DIR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CC_CONFIG_DIR&#39;</span><span class="p">,</span> <span class="n">CC_CONFIG_DEFAULT_DIR</span><span class="p">)</span>

<span class="c1">##############################################################################</span>

<span class="n">validCmip5Experiments</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;1pctCO2&#39;</span><span class="p">,</span> <span class="s1">&#39;abrupt4xCO2&#39;</span><span class="p">,</span> <span class="s1">&#39;amip&#39;</span><span class="p">,</span> <span class="s1">&#39;amip4K&#39;</span><span class="p">,</span> <span class="s1">&#39;amip4xCO2&#39;</span><span class="p">,</span> <span class="s1">&#39;amipFuture&#39;</span><span class="p">,</span> <span class="s1">&#39;aqua4K&#39;</span><span class="p">,</span> <span class="s1">&#39;aqua4xCO2&#39;</span><span class="p">,</span> <span class="s1">&#39;aquaControl&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1959&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1960&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1961&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1962&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1963&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1964&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1965&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1966&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1967&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1968&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1969&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1970&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1971&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1972&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1973&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1974&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1975&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1976&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1977&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1978&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1979&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1980&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1981&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1982&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1983&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1984&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1985&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1986&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1987&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1988&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1989&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1990&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1991&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1992&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1993&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1994&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1995&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1996&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1997&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1998&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal1999&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal2000&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal2001&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal2002&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal2003&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal2004&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal2005&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal2006&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal2007&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal2008&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal2009&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal2010&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal2011&#39;</span><span class="p">,</span> <span class="s1">&#39;decadal2012&#39;</span><span class="p">,</span> <span class="s1">&#39;esmControl&#39;</span><span class="p">,</span> <span class="s1">&#39;esmFdbk1&#39;</span><span class="p">,</span> <span class="s1">&#39;esmFdbk2&#39;</span><span class="p">,</span> <span class="s1">&#39;esmFixClim1&#39;</span><span class="p">,</span> <span class="s1">&#39;esmFixClim2&#39;</span><span class="p">,</span> <span class="s1">&#39;esmHistorical&#39;</span><span class="p">,</span> <span class="s1">&#39;esmrcp85&#39;</span><span class="p">,</span> <span class="s1">&#39;historical&#39;</span><span class="p">,</span> <span class="s1">&#39;historicalExt&#39;</span><span class="p">,</span> <span class="s1">&#39;historicalGHG&#39;</span><span class="p">,</span> <span class="s1">&#39;historicalMisc&#39;</span><span class="p">,</span> <span class="s1">&#39;historicalNat&#39;</span><span class="p">,</span> <span class="s1">&#39;lgm&#39;</span><span class="p">,</span> <span class="s1">&#39;midHolocene&#39;</span><span class="p">,</span> <span class="s1">&#39;noVolc1960&#39;</span><span class="p">,</span> <span class="s1">&#39;noVolc1965&#39;</span><span class="p">,</span> <span class="s1">&#39;noVolc1970&#39;</span><span class="p">,</span> <span class="s1">&#39;noVolc1975&#39;</span><span class="p">,</span> <span class="s1">&#39;noVolc1980&#39;</span><span class="p">,</span> <span class="s1">&#39;noVolc1985&#39;</span><span class="p">,</span> <span class="s1">&#39;noVolc1990&#39;</span><span class="p">,</span> <span class="s1">&#39;noVolc1995&#39;</span><span class="p">,</span> <span class="s1">&#39;noVolc2000&#39;</span><span class="p">,</span> <span class="s1">&#39;noVolc2005&#39;</span><span class="p">,</span> <span class="s1">&#39;past1000&#39;</span><span class="p">,</span> <span class="s1">&#39;piControl&#39;</span><span class="p">,</span> <span class="s1">&#39;rcp26&#39;</span><span class="p">,</span> <span class="s1">&#39;rcp45&#39;</span><span class="p">,</span> <span class="s1">&#39;rcp60&#39;</span><span class="p">,</span> <span class="s1">&#39;rcp85&#39;</span><span class="p">,</span> <span class="s1">&#39;sst2020&#39;</span><span class="p">,</span> <span class="s1">&#39;sst2030&#39;</span><span class="p">,</span> <span class="s1">&#39;sst2090&#39;</span><span class="p">,</span> <span class="s1">&#39;sst2090rcp45&#39;</span><span class="p">,</span> <span class="s1">&#39;sstClim&#39;</span><span class="p">,</span> <span class="s1">&#39;sstClim4xCO2&#39;</span><span class="p">,</span> <span class="s1">&#39;sstClimAerosol&#39;</span><span class="p">,</span> <span class="s1">&#39;sstClimSulfate&#39;</span><span class="p">,</span> <span class="s1">&#39;volcIn2010&#39;</span><span class="p">]</span>

<span class="n">validCordexExperiment</span> <span class="o">=</span> <span class="n">validCmip5Experiments</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;evaluation&#39;</span><span class="p">]</span>


<span class="n">validCmip5Frequencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;fx&#39;</span><span class="p">,</span><span class="s1">&#39;yr&#39;</span><span class="p">,</span><span class="s1">&#39;monClim&#39;</span><span class="p">,</span><span class="s1">&#39;mon&#39;</span><span class="p">,</span><span class="s1">&#39;day&#39;</span><span class="p">,</span><span class="s1">&#39;6hr&#39;</span><span class="p">,</span><span class="s1">&#39;3hr&#39;</span><span class="p">,</span><span class="s1">&#39;subhr&#39;</span><span class="p">]</span>
<span class="n">validCordexFrequencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;fx&#39;</span><span class="p">,</span><span class="s1">&#39;sem&#39;</span><span class="p">,</span><span class="s1">&#39;mon&#39;</span><span class="p">,</span><span class="s1">&#39;day&#39;</span><span class="p">,</span><span class="s1">&#39;6hr&#39;</span><span class="p">,</span><span class="s1">&#39;3hr&#39;</span><span class="p">,</span><span class="s1">&#39;1hr&#39;</span><span class="p">]</span>
<span class="n">validSpecsFrequencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;fx&#39;</span><span class="p">,</span><span class="s1">&#39;mon&#39;</span><span class="p">,</span><span class="s1">&#39;day&#39;</span><span class="p">,</span><span class="s1">&#39;6hr&#39;</span><span class="p">]</span>
<span class="n">validCcmiFrequencies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;fx&#39;</span><span class="p">,</span><span class="s1">&#39;yr&#39;</span><span class="p">,</span><span class="s1">&#39;mon&#39;</span><span class="p">,</span><span class="s1">&#39;day&#39;</span><span class="p">,</span><span class="s1">&#39;hr&#39;</span><span class="p">,</span><span class="s1">&#39;subhr&#39;</span><span class="p">]</span>
<span class="n">validSpecsExptFamilies</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span> <span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">open</span><span class="p">(</span> <span class="n">op</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">CC_CONFIG_DIR</span><span class="p">,</span> <span class="s1">&#39;specs_vocabs/exptFamily.txt&#39;</span> <span class="p">))</span><span class="o">.</span><span class="n">readlines</span><span class="p">()]</span>

<span class="n">validCordexDomainsL</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;SAM-44&#39;</span><span class="p">,</span> <span class="s1">&#39;CAM-44&#39;</span><span class="p">,</span> <span class="s1">&#39;NAM-44&#39;</span><span class="p">,</span> <span class="s1">&#39;EUR-44&#39;</span><span class="p">,</span> <span class="s1">&#39;AFR-44&#39;</span><span class="p">,</span> <span class="s1">&#39;WAS-44&#39;</span><span class="p">,</span> <span class="s1">&#39;EAS-44&#39;</span><span class="p">,</span> <span class="s1">&#39;CAS-44&#39;</span><span class="p">,</span> <span class="s1">&#39;AUS-44&#39;</span><span class="p">,</span> <span class="s1">&#39;ANT-44&#39;</span><span class="p">,</span> <span class="s1">&#39;ARC-44&#39;</span><span class="p">,</span> <span class="s1">&#39;MED-44&#39;</span><span class="p">]</span>
<span class="n">validCordexDomainsLi</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">+</span> <span class="s1">&#39;i&#39;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">validCordexDomainsL</span><span class="p">]</span>
<span class="n">validCordexDomainsH</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;EUR-11&#39;</span><span class="p">]</span>
<span class="n">validCordexDomains</span> <span class="o">=</span> <span class="n">validCordexDomainsL</span> <span class="o">+</span> <span class="n">validCordexDomainsLi</span> <span class="o">+</span> <span class="n">validCordexDomainsH</span>

<span class="n">plevRequired</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;clh&#39;</span><span class="p">,</span> <span class="s1">&#39;clm&#39;</span><span class="p">,</span> <span class="s1">&#39;cll&#39;</span><span class="p">,</span> <span class="s1">&#39;ua850&#39;</span><span class="p">,</span> <span class="s1">&#39;va850&#39;</span><span class="p">,</span> <span class="s1">&#39;ta850&#39;</span><span class="p">,</span> <span class="s1">&#39;hus850&#39;</span><span class="p">,</span> <span class="s1">&#39;ua500&#39;</span><span class="p">,</span> <span class="s1">&#39;va500&#39;</span><span class="p">,</span> <span class="s1">&#39;ta500&#39;</span><span class="p">,</span> <span class="s1">&#39;zg500&#39;</span><span class="p">,</span> <span class="s1">&#39;ua200&#39;</span><span class="p">,</span> <span class="s1">&#39;va200&#39;</span><span class="p">,</span> <span class="s1">&#39;ta200&#39;</span><span class="p">,</span> <span class="s1">&#39;zg200&#39;</span><span class="p">]</span>
<span class="n">plevBndsRequired</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;clh&#39;</span><span class="p">,</span> <span class="s1">&#39;clm&#39;</span><span class="p">,</span> <span class="s1">&#39;cll&#39;</span><span class="p">]</span>
<span class="n">heightRequired</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;tas&#39;</span><span class="p">,</span><span class="s1">&#39;tasmax&#39;</span><span class="p">,</span><span class="s1">&#39;tasmin&#39;</span><span class="p">,</span><span class="s1">&#39;huss&#39;</span><span class="p">,</span><span class="s1">&#39;sfcWind&#39;</span><span class="p">,</span><span class="s1">&#39;sfcWindmax&#39;</span><span class="p">,</span><span class="s1">&#39;wsgsmax&#39;</span><span class="p">,</span><span class="s1">&#39;uas&#39;</span><span class="p">,</span><span class="s1">&#39;vas&#39;</span><span class="p">]</span>


<span class="n">ii</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span> <span class="n">op</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">CC_CONFIG_DIR</span><span class="p">,</span> <span class="s1">&#39;cordex_vocabs/GCMModelName.txt&#39;</span> <span class="p">))</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
<span class="n">validGcmNames</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">ii</span><span class="p">:</span>
  <span class="k">if</span> <span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;#&#39;</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">validGcmNames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>

<span class="n">ii</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span> <span class="n">op</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">CC_CONFIG_DIR</span><span class="p">,</span> <span class="s1">&#39;cordex_vocabs/RCMModelName.txt&#39;</span> <span class="p">))</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
<span class="n">validRcmNames</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">validInstNames</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">ii</span><span class="p">:</span>
  <span class="k">if</span> <span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;#&#39;</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span> <span class="n">l</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">bits</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="n">validRcmNames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
    <span class="n">validInstNames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">bits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>

<span class="n">plevValues</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;clh&#39;</span><span class="p">:</span><span class="mi">22000</span><span class="p">,</span> <span class="s1">&#39;clm&#39;</span><span class="p">:</span><span class="mi">56000</span><span class="p">,</span> <span class="s1">&#39;cll&#39;</span><span class="p">:</span><span class="mi">84000</span><span class="p">}</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span><span class="mi">500</span><span class="p">,</span><span class="mi">850</span><span class="p">]:</span>
  <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;zg&#39;</span><span class="p">,</span><span class="s1">&#39;ua&#39;</span><span class="p">,</span> <span class="s1">&#39;va&#39;</span><span class="p">,</span> <span class="s1">&#39;ta&#39;</span><span class="p">,</span> <span class="s1">&#39;hus&#39;</span><span class="p">]:</span>
    <span class="n">k</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="n">i</span><span class="p">)</span>
    <span class="n">plevValues</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="o">*</span><span class="mi">100</span>

<span class="n">heightRequired</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;tas&#39;</span><span class="p">,</span> <span class="s1">&#39;tasmax&#39;</span><span class="p">,</span> <span class="s1">&#39;tasmin&#39;</span><span class="p">,</span> <span class="s1">&#39;huss&#39;</span><span class="p">,</span> <span class="s1">&#39;sfcWind&#39;</span><span class="p">,</span> <span class="s1">&#39;sfcWindmax&#39;</span><span class="p">,</span> <span class="s1">&#39;wsgsmax&#39;</span><span class="p">,</span> <span class="s1">&#39;uas&#39;</span><span class="p">,</span> <span class="s1">&#39;vas&#39;</span><span class="p">]</span>
<span class="n">heightValues</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">heightRange</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">heightRequired</span><span class="p">:</span>
  <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;tas&#39;</span><span class="p">,</span> <span class="s1">&#39;tasmax&#39;</span><span class="p">,</span> <span class="s1">&#39;tasmin&#39;</span><span class="p">,</span> <span class="s1">&#39;huss&#39;</span><span class="p">]:</span>
    <span class="n">heightValues</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">heightValues</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
  <span class="n">heightRange</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="mf">10.</span><span class="p">)</span>

<span class="n">ii</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span> <span class="n">op</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">CC_CONFIG_DIR</span><span class="p">,</span> <span class="s1">&#39;cordex_vocabs/cordex_domains.csv&#39;</span> <span class="p">))</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
<span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;tag&#39;</span><span class="p">,</span><span class="s1">&#39;res&#39;</span><span class="p">,</span><span class="s1">&#39;grid_np_lon&#39;</span><span class="p">,</span><span class="s1">&#39;grid_np_lat&#39;</span><span class="p">,</span><span class="s1">&#39;nlon&#39;</span><span class="p">,</span><span class="s1">&#39;nlat&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="s1">&#39;e&#39;</span><span class="p">,</span><span class="s1">&#39;s&#39;</span><span class="p">,</span><span class="s1">&#39;n&#39;</span><span class="p">]</span>
<span class="n">rotatedPoleGrids</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">ii</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">16</span><span class="p">]:</span>
  <span class="n">bits</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
  <span class="n">ee</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;nlon&#39;</span><span class="p">,</span><span class="s1">&#39;nlat&#39;</span><span class="p">]:</span>
      <span class="n">ee</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">bits</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="k">elif</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;grid_np_lon&#39;</span><span class="p">,</span><span class="s1">&#39;grid_np_lat&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="s1">&#39;e&#39;</span><span class="p">,</span><span class="s1">&#39;s&#39;</span><span class="p">,</span><span class="s1">&#39;n&#39;</span><span class="p">,</span><span class="s1">&#39;res&#39;</span><span class="p">]:</span>
      <span class="k">if</span> <span class="n">bits</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;N/A&#39;</span><span class="p">:</span>
        <span class="n">ee</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">bits</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="n">ee</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">bits</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">ee</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">bits</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">rotatedPoleGrids</span><span class="p">[</span><span class="n">bits</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">ee</span>

<span class="c1">##Area,Name, deg,Nlon,Nlat,West8,East8,South8,North8,</span>
<span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;tag&#39;</span><span class="p">,</span><span class="s1">&#39;res&#39;</span><span class="p">,</span><span class="s1">&#39;nlon&#39;</span><span class="p">,</span><span class="s1">&#39;nlat&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="s1">&#39;e&#39;</span><span class="p">,</span><span class="s1">&#39;s&#39;</span><span class="p">,</span><span class="s1">&#39;n&#39;</span><span class="p">]</span>
<span class="n">interpolatedGrids</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">ii</span><span class="p">[</span><span class="mi">18</span><span class="p">:</span><span class="mi">33</span><span class="p">]:</span>
  <span class="n">bits</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
  <span class="n">ee</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;nlon&#39;</span><span class="p">,</span><span class="s1">&#39;nlat&#39;</span><span class="p">]:</span>
      <span class="n">ee</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">bits</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="k">elif</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="s1">&#39;e&#39;</span><span class="p">,</span><span class="s1">&#39;s&#39;</span><span class="p">,</span><span class="s1">&#39;n&#39;</span><span class="p">,</span><span class="s1">&#39;res&#39;</span><span class="p">]:</span>
        <span class="n">ee</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">bits</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">ee</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">bits</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">interpolatedGrids</span><span class="p">[</span><span class="n">bits</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">ee</span>

<div class="viewcode-block" id="readVocab"><a class="viewcode-back" href="../../../index.html#ceda_cc.ceda_cc_config.config_c4.readVocab">[docs]</a><span class="k">class</span><span class="w"> </span><span class="nc">readVocab</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;readVocab:</span>
<span class="sd">  A general class to read in vocabulary lists (&quot;code lists&quot; in ISO 19115 terminology) from a variety of structured text files.</span>
<span class="sd">  &quot;&quot;&quot;</span>

  <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="nb">dir</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dir</span> <span class="o">=</span> <span class="nb">dir</span>

  <span class="k">def</span><span class="w"> </span><span class="nf">driver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tt</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">tt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;simpleList&quot;</span><span class="p">:</span>
      <span class="n">tx</span> <span class="o">=</span> <span class="n">tt</span> <span class="o">+</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
      <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getSimpleList</span><span class="p">(</span> <span class="n">tx</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">bit</span><span class="o">=</span><span class="n">tx</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">omt</span><span class="o">=</span><span class="n">tx</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="n">options</span><span class="o">=</span><span class="n">tx</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;readVocab.driver: option </span><span class="si">%s</span><span class="s1"> not recgnised&#39;</span> <span class="o">%</span> <span class="n">tt</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

  <span class="k">def</span><span class="w"> </span><span class="nf">getEvalAssign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span> <span class="p">):</span>
    <span class="n">ii</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">CC_CONFIG_DIR</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">,</span><span class="n">file</span><span class="p">)</span> <span class="p">)</span>
    <span class="n">ll</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">ii</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
      <span class="k">if</span> <span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;#&#39;</span><span class="p">:</span>
        <span class="n">ll</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">l</span> <span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">ll</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Too many lines in </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">file</span> 
    <span class="k">try</span><span class="p">:</span>
      <span class="k">return</span> <span class="nb">eval</span><span class="p">(</span> <span class="n">ll</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
      <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Failed to evaluate configuration line from </span><span class="si">%s</span><span class="s1">:</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
      <span class="k">raise</span>

  <span class="k">def</span><span class="w"> </span><span class="nf">getSimpleList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">file</span><span class="p">,</span><span class="n">bit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">omt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">options</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">ii</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">CC_CONFIG_DIR</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">,</span><span class="n">file</span><span class="p">)</span> <span class="p">)</span>
    <span class="n">oo</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">options</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
      <span class="n">olist</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">olist</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="s1">&#39;returnMappings&#39;</span> <span class="ow">in</span> <span class="n">olist</span><span class="p">:</span>
      <span class="k">assert</span> <span class="n">bit</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;only support returnMappings for bit = -1 or 0&#39;</span>
      <span class="n">ee</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">ii</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
      <span class="k">if</span> <span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;#&#39;</span><span class="p">:</span>
        <span class="n">ll</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">omt</span> <span class="o">==</span> <span class="s1">&#39;last&#39;</span><span class="p">:</span>
          <span class="n">oo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ll</span><span class="o">.</span><span class="n">split</span><span class="p">()[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
        <span class="k">elif</span> <span class="n">bit</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
          <span class="n">oo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ll</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
          <span class="k">if</span> <span class="s1">&#39;returnMappings&#39;</span> <span class="ow">in</span> <span class="n">olist</span><span class="p">:</span>
            <span class="n">bb</span> <span class="o">=</span> <span class="n">ll</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">bit</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
              <span class="n">ee</span><span class="p">[</span><span class="n">bb</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span> <span class="n">bb</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
              <span class="n">ee</span><span class="p">[</span><span class="n">bb</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span> <span class="n">bb</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="p">)</span>
            <span class="n">oo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">bb</span><span class="p">[</span><span class="n">bit</span><span class="p">]</span> <span class="p">)</span>
          <span class="k">else</span><span class="p">:</span>
            <span class="n">oo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ll</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="n">bit</span><span class="p">])</span>

    <span class="k">if</span> <span class="s1">&#39;noneMap&#39;</span> <span class="ow">in</span> <span class="n">olist</span><span class="p">:</span>
      <span class="n">oo</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;None&#39;</span><span class="p">:</span><span class="kc">None</span><span class="p">}</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">oo</span><span class="p">]</span>

    <span class="k">if</span> <span class="s1">&#39;returnMappings&#39;</span> <span class="ow">in</span> <span class="n">olist</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">oo</span><span class="p">,</span> <span class="n">ee</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">oo</span></div>

<span class="n">validSpecsInstitutions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;IC3&#39;</span><span class="p">,</span> <span class="s1">&#39;MPI-M&#39;</span><span class="p">,</span> <span class="s1">&#39;KNMI&#39;</span><span class="p">,</span> <span class="s1">&#39;UOXF&#39;</span><span class="p">,</span> <span class="s1">&#39;CNRM-CERFACS&#39;</span><span class="p">,</span> <span class="s1">&#39;ENEA&#39;</span><span class="p">,</span> <span class="s1">&#39;MOHC&#39;</span><span class="p">,</span> <span class="s1">&#39;SMHI&#39;</span><span class="p">,</span> <span class="s1">&#39;IPSL&#39;</span><span class="p">,</span> <span class="s1">&#39;UREAD&#39;</span><span class="p">,</span> <span class="s1">&#39;ECWMF&#39;</span><span class="p">]</span>

<div class="viewcode-block" id="ProjectConfig"><a class="viewcode-back" href="../../../index.html#ceda_cc.ceda_cc_config.config_c4.ProjectConfig">[docs]</a><span class="k">class</span><span class="w"> </span><span class="nc">ProjectConfig</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;projectConfig:</span>
<span class="sd">  Set project specific configuration options.</span>
<span class="sd">  </span>
<span class="sd">  USAGE:</span>
<span class="sd">  </span>
<span class="sd">  pcfg = projectConfig( &lt;project id&gt;[, version=..] )</span>

<span class="sd">  Creates a &quot;pcfg&quot; object which contains attributes used in the code, including vocabulary lists.</span>
<span class="sd">  &quot;&quot;&quot;</span>

  <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">,</span> <span class="n">version</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">knownProjects</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;CMIP5&#39;</span><span class="p">,</span><span class="s1">&#39;snapsi&#39;</span><span class="p">,</span><span class="s1">&#39;ramip&#39;</span><span class="p">,</span><span class="s1">&#39;ccmi2022&#39;</span><span class="p">,</span><span class="s1">&#39;CCMI&#39;</span><span class="p">,</span><span class="s1">&#39;CORDEX&#39;</span><span class="p">,</span><span class="s1">&#39;SPECS&#39;</span><span class="p">,</span><span class="s1">&#39;ESA-CCI&#39;</span><span class="p">,</span> <span class="s1">&#39;__dummy&#39;</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">project</span> <span class="ow">in</span> <span class="n">knownProjects</span><span class="p">,</span> <span class="s1">&#39;Project </span><span class="si">%s</span><span class="s1"> not in knownProjects </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">knownProjects</span><span class="p">))</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fNameSep</span> <span class="o">=</span> <span class="s1">&#39;_&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">varIndex</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fnvdict</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">varTables</span><span class="o">=</span><span class="s1">&#39;CMIP&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">varTableFlavour</span><span class="o">=</span><span class="s1">&#39;def&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">checkVarType</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">projectV</span> <span class="o">=</span> <span class="n">NT_project</span><span class="p">(</span><span class="n">project</span><span class="p">,</span><span class="n">version</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">gridSpecTol</span> <span class="o">=</span> <span class="mf">0.01</span>
<span class="c1">## default encoding of time range in file names: YYYY[MM[DD[HH]]]-YYYY[MM[DD[HH]]]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">trangeType</span> <span class="o">=</span> <span class="s1">&#39;CMIP&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">controlledFnParts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">project</span> <span class="o">==</span> <span class="s1">&#39;CORDEX&#39;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">requiredGlobalAttributes</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;institute_id&#39;</span><span class="p">,</span> <span class="s1">&#39;contact&#39;</span><span class="p">,</span> <span class="s1">&#39;rcm_version_id&#39;</span><span class="p">,</span> <span class="s1">&#39;product&#39;</span><span class="p">,</span> <span class="s1">&#39;CORDEX_domain&#39;</span><span class="p">,</span> <span class="s1">&#39;creation_date&#39;</span><span class="p">,</span> \
             <span class="s1">&#39;frequency&#39;</span><span class="p">,</span> <span class="s1">&#39;model_id&#39;</span><span class="p">,</span> <span class="s1">&#39;driving_model_id&#39;</span><span class="p">,</span> <span class="s1">&#39;driving_experiment&#39;</span><span class="p">,</span> <span class="s1">&#39;driving_model_ensemble_member&#39;</span><span class="p">,</span> <span class="s1">&#39;experiment_id&#39;</span><span class="p">]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">controlledGlobalAttributes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;frequency&#39;</span><span class="p">,</span> <span class="s1">&#39;driving_experiment_name&#39;</span><span class="p">,</span> <span class="s1">&#39;project_id&#39;</span><span class="p">,</span> <span class="s1">&#39;CORDEX_domain&#39;</span><span class="p">,</span> <span class="s1">&#39;driving_model_id&#39;</span><span class="p">,</span> <span class="s1">&#39;model_id&#39;</span><span class="p">,</span> <span class="s1">&#39;institute_id&#39;</span><span class="p">,</span><span class="s1">&#39;driving_model_ensemble_member&#39;</span><span class="p">,</span><span class="s1">&#39;rcm_version_id&#39;</span><span class="p">]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">globalAttributesInFn</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span><span class="s1">&#39;CORDEX_domain&#39;</span><span class="p">,</span><span class="s1">&#39;driving_model_id&#39;</span><span class="p">,</span><span class="s1">&#39;experiment_id&#39;</span><span class="p">,</span><span class="s1">&#39;driving_model_ensemble_member&#39;</span><span class="p">,</span><span class="s1">&#39;model_id&#39;</span><span class="p">,</span><span class="s1">&#39;rcm_version_id&#39;</span><span class="p">]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">requiredVarAttributes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;long_name&#39;</span><span class="p">,</span> <span class="s1">&#39;standard_name&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">drsMappings</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;variable&#39;</span><span class="p">:</span><span class="s1">&#39;@var&#39;</span><span class="p">,</span><span class="s1">&#39;institute&#39;</span><span class="p">:</span><span class="s1">&#39;institute_id&#39;</span><span class="p">,</span> <span class="s1">&#39;product&#39;</span><span class="p">:</span><span class="s1">&#39;product&#39;</span><span class="p">,</span> <span class="s1">&#39;experiment&#39;</span><span class="p">:</span><span class="s1">&#39;experiment_id&#39;</span><span class="p">,</span> \
                        <span class="s1">&#39;ensemble&#39;</span><span class="p">:</span><span class="s1">&#39;driving_model_ensemble_member&#39;</span><span class="p">,</span> <span class="s1">&#39;model&#39;</span><span class="p">:</span><span class="s1">&#39;model_id&#39;</span><span class="p">,</span> <span class="s1">&#39;driving_model&#39;</span><span class="p">:</span><span class="s1">&#39;driving_model_id&#39;</span><span class="p">,</span> \
                        <span class="s1">&#39;frequency&#39;</span><span class="p">:</span><span class="s1">&#39;frequency&#39;</span><span class="p">,</span> \
                        <span class="s1">&#39;project&#39;</span><span class="p">:</span><span class="s1">&#39;project_id&#39;</span><span class="p">,</span> <span class="s1">&#39;domain&#39;</span><span class="p">:</span><span class="s1">&#39;CORDEX_domain&#39;</span><span class="p">,</span> <span class="s1">&#39;model_version&#39;</span><span class="p">:</span><span class="s1">&#39;rcm_version_id&#39;</span> <span class="p">}</span>

    <span class="k">elif</span> <span class="n">project</span> <span class="o">==</span> <span class="s1">&#39;SPECS&#39;</span><span class="p">:</span>
      <span class="n">lrdr</span> <span class="o">=</span> <span class="n">readVocab</span><span class="p">(</span> <span class="s1">&#39;specs_vocabs/&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">requiredGlobalAttributes</span> <span class="o">=</span> <span class="n">lrdr</span><span class="o">.</span><span class="n">driver</span><span class="p">(</span> <span class="p">(</span><span class="s1">&#39;simpleList&#39;</span><span class="p">,</span> <span class="s1">&#39;globalAts.txt&#39;</span> <span class="p">)</span> <span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">exptFamilies</span> <span class="o">=</span> <span class="n">lrdr</span><span class="o">.</span><span class="n">driver</span><span class="p">(</span> <span class="p">(</span><span class="s1">&#39;simpleList&#39;</span><span class="p">,</span> <span class="s1">&#39;exptFamily.txt&#39;</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">validInstitutions</span> <span class="o">=</span> <span class="n">lrdr</span><span class="o">.</span><span class="n">driver</span><span class="p">(</span> <span class="p">(</span><span class="s1">&#39;simpleList&#39;</span><span class="p">,</span> <span class="s1">&#39;validInstitutions_sv0101.txt&#39;</span> <span class="p">)</span> <span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">realm</span> <span class="o">=</span> <span class="n">lrdr</span><span class="o">.</span><span class="n">driver</span><span class="p">(</span> <span class="p">(</span><span class="s1">&#39;simpleList&#39;</span><span class="p">,</span> <span class="s1">&#39;realm_sv0101.txt&#39;</span> <span class="p">)</span> <span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">controlledGlobalAttributes</span> <span class="o">=</span> <span class="n">lrdr</span><span class="o">.</span><span class="n">driver</span><span class="p">(</span> <span class="p">(</span><span class="s1">&#39;simpleList&#39;</span><span class="p">,</span> <span class="s1">&#39;controlledGlobalAttributes_sv0101.txt&#39;</span> <span class="p">)</span> <span class="p">)</span>
                       <span class="c1">##&#39;initialization_method&#39;,&#39;physics_version&#39;,&#39;realization&#39;]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">globalAttributesInFn</span> <span class="o">=</span> <span class="n">lrdr</span><span class="o">.</span><span class="n">driver</span><span class="p">(</span> <span class="p">(</span><span class="s1">&#39;simpleList&#39;</span><span class="p">,</span> <span class="s1">&#39;globalAttributesInFn_sv0101.txt&#39;</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="s1">&#39;noneMap&#39;</span> <span class="p">)</span> <span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">requiredVarAttributes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;long_name&#39;</span><span class="p">,</span> <span class="s1">&#39;standard_name&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">]</span>
      <span class="n">oo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">drsMappings</span> <span class="o">=</span> <span class="n">lrdr</span><span class="o">.</span><span class="n">driver</span><span class="p">(</span> <span class="p">(</span><span class="s1">&#39;simpleList&#39;</span><span class="p">,</span> <span class="s1">&#39;drsMappings_sv0101.txt&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="s1">&#39;returnMappings&#39;</span> <span class="p">)</span> <span class="p">)</span>

      <span class="c1">##self.drsMappings = {&#39;variable&#39;:&#39;@var&#39;, &#39;institute&#39;:&#39;institute_id&#39;, &#39;product&#39;:&#39;product&#39;, &#39;experiment&#39;:&#39;experiment_id&#39;, \</span>
                        <span class="c1">##&#39;ensemble&#39;:&#39;@ensemble&#39;, &#39;model&#39;:&#39;model_id&#39;, &#39;realm&#39;:&#39;modeling_realm&#39;, \</span>
                        <span class="c1">##&#39;frequency&#39;:&#39;frequency&#39;, &#39;start_date&#39;:&#39;@forecast_reference_time&#39;, \</span>
                        <span class="c1">##&#39;table&#39;:&#39;@mip_id&#39;,</span>
                        <span class="c1">##&#39;project&#39;:&#39;project_id&#39;}</span>

    <span class="k">elif</span> <span class="n">project</span> <span class="o">==</span> <span class="s1">&#39;CMIP5&#39;</span><span class="p">:</span>
      <span class="n">lrdr</span> <span class="o">=</span> <span class="n">readVocab</span><span class="p">(</span> <span class="s1">&#39;cmip5_vocabs/&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">requiredGlobalAttributes</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;contact&#39;</span><span class="p">,</span> <span class="s1">&#39;product&#39;</span><span class="p">,</span> <span class="s1">&#39;creation_date&#39;</span><span class="p">,</span> <span class="s1">&#39;tracking_id&#39;</span><span class="p">,</span> \
              <span class="s1">&#39;experiment_id&#39;</span><span class="p">]</span>
      <span class="c1">##self.requiredGlobalAttributes = lrdr.getSimpleList( &#39;globalAts.txt&#39; )</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">controlledGlobalAttributes</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;project_id&#39;</span><span class="p">,</span><span class="s1">&#39;experiment_id&#39;</span><span class="p">,</span> <span class="s1">&#39;frequency&#39;</span><span class="p">,</span><span class="s1">&#39;Conventions&#39;</span><span class="p">,</span><span class="s1">&#39;modeling_realm&#39;</span><span class="p">,</span> \
                       <span class="s1">&#39;initialization_method&#39;</span><span class="p">,</span><span class="s1">&#39;physics_version&#39;</span><span class="p">,</span><span class="s1">&#39;realization&#39;</span><span class="p">]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">globalAttributesInFn</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span><span class="s1">&#39;@mip_id&#39;</span><span class="p">,</span><span class="s1">&#39;model_id&#39;</span><span class="p">,</span><span class="s1">&#39;experiment_id&#39;</span><span class="p">,</span><span class="s1">&#39;@ensemble&#39;</span><span class="p">]</span>
<span class="c1">#sic_Oimon_EC-Earth2_seaIceBestInit_S19910501_series1_r1i1p1_199501-199502.nc </span>
<span class="c1">## mip_id derived from global attribute Table_id (CMOR convention); experiment family derived from experiment_id, ensemble derived from rip attributes.</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">requiredVarAttributes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;long_name&#39;</span><span class="p">,</span> <span class="s1">&#39;standard_name&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">]</span>
<span class="c1">## key: DRS element name, value: global attribute name or tag for mapping from file information (&quot;@....&quot;).</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">drsMappings</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;variable&#39;</span><span class="p">:</span><span class="s1">&#39;@var&#39;</span><span class="p">,</span> <span class="s1">&#39;institute&#39;</span><span class="p">:</span><span class="s1">&#39;institute_id&#39;</span><span class="p">,</span> <span class="s1">&#39;product&#39;</span><span class="p">:</span><span class="s1">&#39;product&#39;</span><span class="p">,</span> <span class="s1">&#39;experiment&#39;</span><span class="p">:</span><span class="s1">&#39;experiment_id&#39;</span><span class="p">,</span> \
                        <span class="s1">&#39;ensemble&#39;</span><span class="p">:</span><span class="s1">&#39;@ensemble&#39;</span><span class="p">,</span> <span class="s1">&#39;model&#39;</span><span class="p">:</span><span class="s1">&#39;model_id&#39;</span><span class="p">,</span> <span class="s1">&#39;realm&#39;</span><span class="p">:</span><span class="s1">&#39;modeling_realm&#39;</span><span class="p">,</span> \
                        <span class="s1">&#39;frequency&#39;</span><span class="p">:</span><span class="s1">&#39;frequency&#39;</span><span class="p">,</span>  <span class="s1">&#39;table&#39;</span><span class="p">:</span><span class="s1">&#39;@mip_id&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;project&#39;</span><span class="p">:</span><span class="s1">&#39;project_id&#39;</span><span class="p">}</span>

    <span class="k">elif</span> <span class="n">project</span> <span class="o">==</span> <span class="s1">&#39;CCMI&#39;</span><span class="p">:</span>
      <span class="n">lrdr</span> <span class="o">=</span> <span class="n">readVocab</span><span class="p">(</span> <span class="s1">&#39;ccmi_vocabs/&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">requiredGlobalAttributes</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;creation_date&#39;</span><span class="p">,</span> <span class="s1">&#39;tracking_id&#39;</span><span class="p">,</span> <span class="s1">&#39;forcing&#39;</span><span class="p">,</span> <span class="s1">&#39;model_id&#39;</span><span class="p">,</span> <span class="s1">&#39;parent_experiment_id&#39;</span><span class="p">,</span> <span class="s1">&#39;parent_experiment_rip&#39;</span><span class="p">,</span> <span class="s1">&#39;branch_time&#39;</span><span class="p">,</span> <span class="s1">&#39;contact&#39;</span><span class="p">,</span> <span class="s1">&#39;institute_id&#39;</span> <span class="p">]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">requiredGlobalAttributes</span> <span class="o">=</span> <span class="n">lrdr</span><span class="o">.</span><span class="n">getSimpleList</span><span class="p">(</span> <span class="s1">&#39;globalAts.txt&#39;</span><span class="p">,</span> <span class="n">bit</span><span class="o">=</span><span class="mi">0</span> <span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">controlledGlobalAttributes</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;experiment_id&#39;</span><span class="p">,</span> <span class="s1">&#39;project&#39;</span><span class="p">,</span> <span class="s1">&#39;frequency&#39;</span> <span class="p">]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">globalAttributesInFn</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span><span class="s1">&#39;@mip_id&#39;</span><span class="p">,</span><span class="s1">&#39;model_id&#39;</span><span class="p">,</span><span class="s1">&#39;experiment_id&#39;</span><span class="p">,</span><span class="s1">&#39;@ensemble&#39;</span><span class="p">]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">requiredVarAttributes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;long_name&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">drsMappings</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;variable&#39;</span><span class="p">:</span><span class="s1">&#39;@var&#39;</span><span class="p">,</span> <span class="s1">&#39;institute&#39;</span><span class="p">:</span><span class="s1">&#39;institute_id&#39;</span><span class="p">,</span> <span class="s1">&#39;product&#39;</span><span class="p">:</span><span class="s1">&#39;product&#39;</span><span class="p">,</span> <span class="s1">&#39;experiment&#39;</span><span class="p">:</span><span class="s1">&#39;experiment_id&#39;</span><span class="p">,</span> \
                        <span class="s1">&#39;ensemble&#39;</span><span class="p">:</span><span class="s1">&#39;@ensemble&#39;</span><span class="p">,</span> <span class="s1">&#39;model&#39;</span><span class="p">:</span><span class="s1">&#39;model_id&#39;</span><span class="p">,</span> <span class="s1">&#39;realm&#39;</span><span class="p">:</span><span class="s1">&#39;modeling_realm&#39;</span><span class="p">,</span> \
                        <span class="s1">&#39;frequency&#39;</span><span class="p">:</span><span class="s1">&#39;frequency&#39;</span><span class="p">,</span>  <span class="s1">&#39;table&#39;</span><span class="p">:</span><span class="s1">&#39;@mip_id&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;project&#39;</span><span class="p">:</span><span class="s1">&#39;project_id&#39;</span><span class="p">}</span>

    <span class="k">elif</span> <span class="n">project</span> <span class="ow">in</span> <span class="p">[</span> <span class="s1">&#39;ccmi2022&#39;</span><span class="p">,</span> <span class="s1">&#39;ramip&#39;</span><span class="p">,</span> <span class="s1">&#39;snapsi&#39;</span><span class="p">]:</span>
      <span class="kn">import</span><span class="w"> </span><span class="nn">ceda_cc.ceda_cc_config.config.table_imports</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ti</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">varTableFlavour</span><span class="o">=</span><span class="s1">&#39;json_ccmi&#39;</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">thiscfg</span> <span class="o">=</span> <span class="n">ti</span><span class="o">.</span><span class="n">Ingest_cmipplus</span><span class="p">(</span><span class="n">project</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">requiredGlobalAttributes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">thiscfg</span><span class="o">.</span><span class="n">required</span><span class="p">[:]</span>
      <span class="n">variant_ixs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;realization&#39;</span><span class="p">,</span> <span class="s1">&#39;initialization&#39;</span><span class="p">,</span> <span class="s1">&#39;physics&#39;</span><span class="p">,</span> <span class="s1">&#39;forcing&#39;</span><span class="p">]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">controlledGlobalAttributes</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span> <span class="p">[</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">thiscfg</span><span class="o">.</span><span class="n">acvs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;list&#39;</span> <span class="p">]</span> <span class="p">)</span> <span class="o">+</span> \
                              <span class="p">[</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">_index&#39;</span> <span class="o">%</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">variant_ixs</span><span class="p">]</span>
      <span class="k">if</span> <span class="n">project</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;ramip&#39;</span><span class="p">,</span> <span class="s1">&#39;ccmi2022&#39;</span><span class="p">]:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">globalAttributesInFn</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span><span class="s1">&#39;table_id&#39;</span><span class="p">,</span><span class="s1">&#39;source_id&#39;</span><span class="p">,</span><span class="s1">&#39;experiment_id&#39;</span><span class="p">,</span><span class="s1">&#39;variant_label&#39;</span><span class="p">,</span><span class="s1">&#39;grid_label&#39;</span><span class="p">,</span><span class="s1">&#39;@variant:4:&#39;</span><span class="p">]</span>
                  <span class="c1">##### o3_Amon_CMAM_refD1_r1i1p1f1_gn_196001-201812.nc</span>
      <span class="k">elif</span> <span class="n">project</span> <span class="o">==</span> <span class="s1">&#39;snapsi&#39;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">globalAttributesInFn</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span><span class="s1">&#39;table_id&#39;</span><span class="p">,</span><span class="s1">&#39;source_id&#39;</span><span class="p">,</span><span class="s1">&#39;experiment_id&#39;</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="s1">&#39;grid_label&#39;</span><span class="p">,</span><span class="s1">&#39;@variant:4:&#39;</span><span class="p">]</span>
      <span class="c1">##ch4_Amon_SOCOL_refD1_gn_r1i1p1f1_196001-201812.nc</span>
      <span class="c1">##ramip: huss_day_CESM2_ssp370-126aer_r2i1p1f1_gn_20150101-20791231.nc</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">requiredVarAttributes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;long_name&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">,</span> <span class="s1">&#39;standard_name&#39;</span><span class="p">]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">drsMappings</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;variable&#39;</span><span class="p">:</span><span class="s1">&#39;@var&#39;</span><span class="p">,</span> <span class="s1">&#39;institution_id&#39;</span><span class="p">:</span><span class="s1">&#39;institution_id&#39;</span><span class="p">,</span> <span class="s1">&#39;experiment_id&#39;</span><span class="p">:</span><span class="s1">&#39;experiment_id&#39;</span><span class="p">,</span> \
                        <span class="s1">&#39;variant_label&#39;</span><span class="p">:</span><span class="s1">&#39;variant_label&#39;</span><span class="p">,</span> <span class="s1">&#39;source_id&#39;</span><span class="p">:</span><span class="s1">&#39;source_id&#39;</span><span class="p">,</span> <span class="s1">&#39;realm&#39;</span><span class="p">:</span><span class="s1">&#39;realm&#39;</span><span class="p">,</span> \
                        <span class="s1">&#39;frequency&#39;</span><span class="p">:</span><span class="s1">&#39;frequency&#39;</span><span class="p">,</span>  <span class="s1">&#39;table_id&#39;</span><span class="p">:</span><span class="s1">&#39;table_id&#39;</span><span class="p">,</span> <span class="s1">&#39;mip_era&#39;</span><span class="p">:</span><span class="s1">&#39;mip_era&#39;</span><span class="p">,</span><span class="s1">&#39;frequency&#39;</span><span class="p">:</span><span class="s1">&#39;frequency&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;activity_id&#39;</span><span class="p">:</span><span class="s1">&#39;activity_id&#39;</span>
                        <span class="p">}</span>

    <span class="k">elif</span> <span class="n">project</span> <span class="o">==</span> <span class="s1">&#39;ESA-CCI&#39;</span><span class="p">:</span>
      <span class="n">lrdr</span> <span class="o">=</span> <span class="n">readVocab</span><span class="p">(</span> <span class="s1">&#39;esacci_vocabs/&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">varTables</span><span class="o">=</span><span class="s1">&#39;FLAT&#39;</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">fNameSep</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">checkVarType</span> <span class="o">=</span> <span class="kc">False</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">requiredGlobalAttributes</span> <span class="o">=</span> <span class="n">lrdr</span><span class="o">.</span><span class="n">getSimpleList</span><span class="p">(</span> <span class="s1">&#39;requiredGlobalAts.txt&#39;</span><span class="p">,</span> <span class="n">bit</span><span class="o">=</span><span class="mi">0</span> <span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">controlledGlobalAttributes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;platform&#39;</span><span class="p">,</span><span class="s1">&#39;sensor&#39;</span><span class="p">,</span><span class="s1">&#39;project&#39;</span><span class="p">,</span><span class="s1">&#39;Conventions&#39;</span><span class="p">,</span><span class="s1">&#39;institution&#39;</span><span class="p">,</span><span class="s1">&#39;cdm_data_type&#39;</span><span class="p">,</span><span class="s1">&#39;time_coverage_duration&#39;</span><span class="p">,</span><span class="s1">&#39;spatial_resolution&#39;</span> <span class="p">]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">controlledFnParts</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;level&#39;</span><span class="p">,</span><span class="s1">&#39;cciProject&#39;</span><span class="p">,</span><span class="s1">&#39;var&#39;</span><span class="p">,</span><span class="s1">&#39;version&#39;</span><span class="p">]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">requiredVarAttributes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;long_name&#39;</span><span class="p">,</span> <span class="s1">&#39;standard_name&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">drsMappings</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;variable&#39;</span><span class="p">:</span><span class="s1">&#39;#var&#39;</span><span class="p">,</span><span class="s1">&#39;platform&#39;</span><span class="p">:</span><span class="s1">&#39;platform&#39;</span><span class="p">,</span><span class="s1">&#39;sensor&#39;</span><span class="p">:</span><span class="s1">&#39;sensor&#39;</span><span class="p">,</span><span class="s1">&#39;level&#39;</span><span class="p">:</span><span class="s1">&#39;#level&#39;</span><span class="p">,</span> \
                <span class="s1">&#39;standard_name&#39;</span><span class="p">:</span><span class="s1">&#39;*standard_name&#39;</span><span class="p">,</span> \
                <span class="s1">&#39;activity&#39;</span><span class="p">:</span><span class="s1">&#39;=CLIPC&#39;</span><span class="p">,</span> \
                <span class="s1">&#39;algorithm&#39;</span><span class="p">:</span><span class="s1">&#39;$algorithm:unset&#39;</span><span class="p">,</span> <span class="s1">&#39;frequency&#39;</span><span class="p">:</span><span class="s1">&#39;$frequency&#39;</span><span class="p">,</span> \
                <span class="s1">&#39;spatial_resolution&#39;</span><span class="p">:</span><span class="s1">&#39;spatial_resolution&#39;</span><span class="p">,</span> <span class="s1">&#39;ecv&#39;</span><span class="p">:</span><span class="s1">&#39;@ecv&#39;</span><span class="p">,</span><span class="s1">&#39;version&#39;</span><span class="p">:</span><span class="s1">&#39;#version&#39;</span><span class="p">,</span><span class="s1">&#39;convention_version&#39;</span><span class="p">:</span><span class="s1">&#39;#gdsv&#39;</span><span class="p">}</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">globalAttributesInFn</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,]</span>
    <span class="k">elif</span> <span class="n">project</span> <span class="o">==</span> <span class="s1">&#39;__dummy&#39;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">requiredGlobalAttributes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ga</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">controlledGlobalAttributes</span> <span class="o">=</span> <span class="p">[</span> <span class="p">]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">globalAttributesInFn</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span><span class="s1">&#39;ga2&#39;</span><span class="p">,</span> <span class="s1">&#39;ga3&#39;</span><span class="p">,</span> <span class="s1">&#39;ga4&#39;</span> <span class="p">]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">requiredVarAttributes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;long_name&#39;</span><span class="p">,</span> <span class="s1">&#39;standard_name&#39;</span><span class="p">,</span> <span class="s1">&#39;units&#39;</span><span class="p">]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">drsMappings</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;variable&#39;</span><span class="p">:</span><span class="s1">&#39;@var&#39;</span><span class="p">}</span>

<span class="c1"># # used in checkStandardDims</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">plevRequired</span> <span class="o">=</span> <span class="n">plevRequired</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">plevValues</span> <span class="o">=</span> <span class="n">plevValues</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">heightRequired</span> <span class="o">=</span> <span class="n">heightRequired</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">heightValues</span> <span class="o">=</span> <span class="n">heightValues</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">heightRange</span> <span class="o">=</span> <span class="n">heightRange</span>

<span class="c1"># # used in checkGrids</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">rotatedPoleGrids</span> <span class="o">=</span> <span class="n">rotatedPoleGrids</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">interpolatedGrids</span> <span class="o">=</span> <span class="n">interpolatedGrids</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">doCheckGrids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectV</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;CORDEX&#39;</span><span class="p">,]</span>

<span class="c1"># # used in checkFileName (freqIndex also used in checkByVar)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectV</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s1">&#39;CORDEX&#39;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">fnParts</span> <span class="o">=</span> <span class="n">NT_fnParts</span><span class="p">(</span> <span class="nb">len</span><span class="o">=</span><span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">],</span> <span class="n">fxLen</span><span class="o">=</span><span class="p">[</span><span class="mi">8</span><span class="p">,],</span>  <span class="n">unfLen</span><span class="o">=</span><span class="p">[</span><span class="mi">9</span><span class="p">,],</span> <span class="n">checkTLen</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ixDomain</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ixFreq</span><span class="o">=</span><span class="mi">7</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectV</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s1">&#39;CMIP5&#39;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">fnParts</span> <span class="o">=</span> <span class="n">NT_fnParts</span><span class="p">(</span> <span class="nb">len</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="n">fxLen</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,],</span>  <span class="n">unfLen</span><span class="o">=</span><span class="p">[</span><span class="mi">6</span><span class="p">,],</span> <span class="n">checkTLen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ixDomain</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ixFreq</span><span class="o">=</span><span class="kc">None</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectV</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s1">&#39;SPECS&#39;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">fnParts</span> <span class="o">=</span> <span class="n">lrdr</span><span class="o">.</span><span class="n">getEvalAssign</span><span class="p">(</span> <span class="s1">&#39;fnParts_sv0101.txt&#39;</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectV</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s1">&#39;CCMI&#39;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">fnParts</span> <span class="o">=</span> <span class="n">NT_fnParts</span><span class="p">(</span> <span class="nb">len</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="n">fxLen</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,],</span>  <span class="n">unfLen</span><span class="o">=</span><span class="p">[</span><span class="mi">6</span><span class="p">,],</span> <span class="n">checkTLen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ixDomain</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ixFreq</span><span class="o">=</span><span class="kc">None</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectV</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;ramip&#39;</span><span class="p">,</span><span class="s1">&#39;ccmi2022&#39;</span><span class="p">]:</span>
        <span class="c1"># ch4_Amon_SOCOL_refD1_gn_r1i1p1f1_196001-201812.nc</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">fnParts</span> <span class="o">=</span> <span class="n">NT_fnParts</span><span class="p">(</span> <span class="nb">len</span><span class="o">=</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">],</span> <span class="n">fxLen</span><span class="o">=</span><span class="p">[</span><span class="mi">6</span><span class="p">,],</span>  <span class="n">unfLen</span><span class="o">=</span><span class="p">[</span><span class="mi">7</span><span class="p">,],</span> <span class="n">checkTLen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ixDomain</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ixFreq</span><span class="o">=</span><span class="kc">None</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectV</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;snapsi&#39;</span><span class="p">]:</span>
         <span class="c1"># epfy_6hrPtZ_CESM2-CAM6_free_s20180125_r10i1p1f1_gn_20180125-20180310.nc</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">fnParts</span> <span class="o">=</span> <span class="n">NT_fnParts</span><span class="p">(</span> <span class="nb">len</span><span class="o">=</span><span class="p">[</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">fxLen</span><span class="o">=</span><span class="p">[</span><span class="mi">7</span><span class="p">,],</span>  <span class="n">unfLen</span><span class="o">=</span><span class="p">[</span><span class="mi">8</span><span class="p">,],</span> <span class="n">checkTLen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ixDomain</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ixFreq</span><span class="o">=</span><span class="kc">None</span> <span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectV</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s1">&#39;ESA-CCI&#39;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">fnParts</span> <span class="o">=</span> <span class="n">NT_fnParts</span><span class="p">(</span> <span class="nb">len</span><span class="o">=</span><span class="p">[</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">],</span> <span class="n">fxLen</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,],</span>  <span class="n">unfLen</span><span class="o">=</span><span class="p">[</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,],</span> <span class="n">checkTLen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ixDomain</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ixFreq</span><span class="o">=</span><span class="kc">None</span> <span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">trangeType</span> <span class="o">=</span> <span class="s1">&#39;ESA-CCI&#39;</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectV</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s1">&#39;__dummy&#39;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">fnParts</span> <span class="o">=</span> <span class="n">NT_fnParts</span><span class="p">(</span> <span class="nb">len</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="n">fxLen</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,],</span>  <span class="n">unfLen</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,],</span> <span class="n">checkTLen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ixDomain</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ixFreq</span><span class="o">=</span><span class="mi">1</span> <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">fnPartsOkLen</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnParts</span><span class="o">.</span><span class="n">len</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fnPartsOkFixedLen</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnParts</span><span class="o">.</span><span class="n">fxLen</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fnPartsOkUnfixedLen</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnParts</span><span class="o">.</span><span class="n">unfLen</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">checkTrangeLen</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnParts</span><span class="o">.</span><span class="n">checkTLen</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">domainIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnParts</span><span class="o">.</span><span class="n">ixDomain</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">freqIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnParts</span><span class="o">.</span><span class="n">ixFreq</span>


    <span class="bp">self</span><span class="o">.</span><span class="n">defaults</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;variableDataType&#39;</span><span class="p">:</span><span class="s1">&#39;float&#39;</span> <span class="p">}</span>
<span class="c1"># ## used in mipVocabs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">legacy</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectV</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s1">&#39;CORDEX&#39;</span><span class="p">:</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabDir</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">CC_CONFIG_DIR</span><span class="p">,</span> <span class="s1">&#39;cordex_vocabs/mip/&#39;</span><span class="p">)</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabTl</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;fx&#39;</span><span class="p">,</span><span class="s1">&#39;sem&#39;</span><span class="p">,</span><span class="s1">&#39;mon&#39;</span><span class="p">,</span><span class="s1">&#39;day&#39;</span><span class="p">,</span><span class="s1">&#39;6h&#39;</span><span class="p">,</span><span class="s1">&#39;3h&#39;</span><span class="p">,</span><span class="s1">&#39;1h&#39;</span><span class="p">]</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabVgmap</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;6h&#39;</span><span class="p">:</span><span class="s1">&#39;6hr&#39;</span><span class="p">,</span><span class="s1">&#39;3h&#39;</span><span class="p">:</span><span class="s1">&#39;3hr&#39;</span><span class="p">,</span> <span class="s1">&#39;1h&#39;</span><span class="p">:</span><span class="s1">&#39;1hr&#39;</span><span class="p">}</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabFnpat</span> <span class="o">=</span> <span class="s1">&#39;CORDEX_</span><span class="si">%s</span><span class="s1">&#39;</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectV</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s1">&#39;CMIP5&#39;</span><span class="p">:</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabDir</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">CC_CONFIG_DIR</span><span class="p">,</span> <span class="s1">&#39;cmip5_vocabs/mip/&#39;</span><span class="p">)</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabTl</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;fx&#39;</span><span class="p">,</span><span class="s1">&#39;Oyr&#39;</span><span class="p">,</span><span class="s1">&#39;Oclim&#39;</span><span class="p">,</span><span class="s1">&#39;Omon&#39;</span><span class="p">,</span><span class="s1">&#39;Amon&#39;</span><span class="p">,</span><span class="s1">&#39;Lmon&#39;</span><span class="p">,</span><span class="s1">&#39;LImon&#39;</span><span class="p">,</span><span class="s1">&#39;OImon&#39;</span><span class="p">,</span><span class="s1">&#39;cfMon&#39;</span><span class="p">,</span><span class="s1">&#39;aero&#39;</span><span class="p">,</span><span class="s1">&#39;cfDay&#39;</span><span class="p">,</span><span class="s1">&#39;day&#39;</span><span class="p">,</span><span class="s1">&#39;cfOff&#39;</span><span class="p">,</span><span class="s1">&#39;cfSites&#39;</span><span class="p">,</span><span class="s1">&#39;6hrLev&#39;</span><span class="p">,</span><span class="s1">&#39;6hrPlev&#39;</span><span class="p">,</span><span class="s1">&#39;3hr&#39;</span><span class="p">,</span><span class="s1">&#39;cf3hr&#39;</span><span class="p">]</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabVgmap</span> <span class="o">=</span> <span class="p">{}</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabFnpat</span> <span class="o">=</span> <span class="s1">&#39;CMIP5_</span><span class="si">%s</span><span class="s1">&#39;</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">defaults</span><span class="p">[</span><span class="s1">&#39;variableDataType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span> 
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectV</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s1">&#39;SPECS&#39;</span><span class="p">:</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabDir</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">CC_CONFIG_DIR</span><span class="p">,</span> <span class="s1">&#39;specs_vocabs/mip/&#39;</span><span class="p">)</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabTl</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;fx&#39;</span><span class="p">,</span><span class="s1">&#39;Omon&#39;</span><span class="p">,</span><span class="s1">&#39;Amon&#39;</span><span class="p">,</span><span class="s1">&#39;Lmon&#39;</span><span class="p">,</span><span class="s1">&#39;OImon&#39;</span><span class="p">,</span><span class="s1">&#39;day&#39;</span><span class="p">,</span><span class="s1">&#39;6hr&#39;</span><span class="p">]</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabVgmap</span> <span class="o">=</span> <span class="p">{}</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabFnpat</span> <span class="o">=</span> <span class="s1">&#39;SPECS_</span><span class="si">%s</span><span class="s1">&#39;</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectV</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s1">&#39;CCMI&#39;</span><span class="p">:</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabDir</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">CC_CONFIG_DIR</span><span class="p">,</span> <span class="s1">&#39;ccmi_vocabs/mip/&#39;</span><span class="p">)</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabTl</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;fixed&#39;</span><span class="p">,</span><span class="s1">&#39;annual&#39;</span><span class="p">,</span><span class="s1">&#39;monthly&#39;</span><span class="p">,</span><span class="s1">&#39;daily&#39;</span><span class="p">,</span><span class="s1">&#39;hourly&#39;</span><span class="p">,</span><span class="s1">&#39;satdaily&#39;</span><span class="p">]</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabVgmap</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fixed&#39;</span><span class="p">:</span><span class="s1">&#39;fx&#39;</span><span class="p">,</span><span class="s1">&#39;annual&#39;</span><span class="p">:</span><span class="s1">&#39;yr&#39;</span><span class="p">,</span><span class="s1">&#39;monthly&#39;</span><span class="p">:</span><span class="s1">&#39;mon&#39;</span><span class="p">,</span><span class="s1">&#39;daily&#39;</span><span class="p">:</span><span class="s1">&#39;day&#39;</span><span class="p">,</span><span class="s1">&#39;hourly&#39;</span><span class="p">:</span><span class="s1">&#39;hr&#39;</span><span class="p">,</span><span class="s1">&#39;satdaily&#39;</span><span class="p">:</span><span class="s1">&#39;day&#39;</span><span class="p">}</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabFnpat</span> <span class="o">=</span> <span class="s1">&#39;CCMI1_</span><span class="si">%s</span><span class="s1">&#39;</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectV</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;snapsi&#39;</span><span class="p">,</span><span class="s1">&#39;ramip&#39;</span><span class="p">,</span><span class="s1">&#39;ccmi2022&#39;</span><span class="p">]:</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">legacy</span> <span class="o">=</span> <span class="kc">False</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabDir</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">CC_CONFIG_DIR</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/Tables/&#39;</span> <span class="o">%</span> <span class="n">project</span><span class="p">)</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabTl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">thiscfg</span><span class="o">.</span><span class="n">acvs</span><span class="p">[</span><span class="s1">&#39;table_id&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabVgmap</span> <span class="o">=</span> <span class="p">{}</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabFnpat</span> <span class="o">=</span>  <span class="n">project</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;_</span><span class="si">%s</span><span class="s1">.json&#39;</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectV</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s1">&#39;ESA-CCI&#39;</span><span class="p">:</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabDir</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">CC_CONFIG_DIR</span><span class="p">,</span> <span class="s1">&#39;esacci_vocabs/&#39;</span><span class="p">)</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabTl</span> <span class="o">=</span> <span class="p">[]</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabVgmap</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;ESACCI&#39;</span><span class="p">:</span><span class="s1">&#39;ESACCI&#39;</span> <span class="p">}</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabFnpat</span> <span class="o">=</span> <span class="s1">&#39;variableInFile.txt&#39;</span>
    <span class="k">else</span><span class="p">:</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabDir</span> <span class="o">=</span> <span class="kc">None</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabTl</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;day&#39;</span><span class="p">,</span> <span class="s1">&#39;t2&#39;</span><span class="p">]</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabVgmap</span> <span class="o">=</span> <span class="p">{}</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabFnpat</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabPars</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mipVocabDir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabTl</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabVgmap</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabFnpat</span><span class="p">]</span>

<span class="c1"># ## used in checkByVar</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">==</span> <span class="s1">&#39;CORDEX&#39;</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">groupIndex</span> <span class="o">=</span> <span class="mi">7</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;CMIP5&#39;</span><span class="p">,</span><span class="s1">&#39;CCMI&#39;</span><span class="p">,</span><span class="s1">&#39;ramip&#39;</span><span class="p">,</span><span class="s1">&#39;ccmi2022&#39;</span><span class="p">,</span><span class="s1">&#39;snapsi&#39;</span><span class="p">,</span><span class="s1">&#39;SPECS&#39;</span><span class="p">,</span><span class="s1">&#39;__dummy&#39;</span><span class="p">]:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">groupIndex</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;ESA-CCI&#39;</span><span class="p">]:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">fnvdict</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;SSTskin&#39;</span><span class="p">:{</span><span class="s1">&#39;v&#39;</span><span class="p">:</span><span class="s1">&#39;sea_surface_temperature&#39;</span><span class="p">,</span> <span class="s1">&#39;sn&#39;</span><span class="p">:</span><span class="s1">&#39;sea_surface_skin_temperature&#39;</span><span class="p">}</span> <span class="p">}</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">fnoptions</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;groupIndex&#39;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;trangeIndex&#39;</span><span class="p">:[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="p">}</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">fnoptions</span><span class="p">[</span><span class="s1">&#39;inFn&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[[</span><span class="kc">None</span><span class="p">,</span><span class="s1">&#39;*activity&#39;</span><span class="p">,</span><span class="s1">&#39;*level&#39;</span><span class="p">,</span><span class="s1">&#39;*project&#39;</span><span class="p">,</span><span class="s1">&#39;*var&#39;</span><span class="p">,</span><span class="s1">&#39;*product&#39;</span><span class="p">,</span><span class="s1">&#39;*additional&#39;</span><span class="p">,</span><span class="s1">&#39;*gdsv&#39;</span><span class="p">,</span><span class="s1">&#39;*version&#39;</span><span class="p">],</span>
                                <span class="p">[</span><span class="s1">&#39;*activity&#39;</span><span class="p">,</span><span class="s1">&#39;*project&#39;</span><span class="p">,</span><span class="s1">&#39;*level&#39;</span><span class="p">,</span><span class="s1">&#39;*var&#39;</span><span class="p">,</span><span class="s1">&#39;*additional&#39;</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="s1">&#39;*version&#39;</span><span class="p">]]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">fnoptions</span><span class="p">[</span><span class="s1">&#39;varIndex&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="c1">##Indicative Date&gt;[&lt;Indicative Time&gt;]-ESACCI-&lt;Processing Level&gt;_&lt;CCI Project&gt;-&lt;Data Type&gt;-&lt;Product String&gt;[- &lt;Additional Segregator&gt;][-v&lt;GDS version&gt;]-fv&lt;File version&gt;.nc</span>
<span class="c1">##ESACCI-&lt;CCI Project&gt;-&lt;Processing Level&gt;-&lt;Data Type&gt;-&lt;Product String&gt;[-&lt;Additional Segregator&gt;]-&lt;IndicativeDate&gt;[&lt;Indicative Time&gt;]-fv&lt;File version&gt;.nc</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">trangeIndex</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">getVocabs</span><span class="p">()</span>
    <span class="n">test</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">test</span><span class="p">:</span>
      <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vocabs</span><span class="p">[</span><span class="s1">&#39;variable&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">varcons</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
        <span class="k">for</span> <span class="n">k2</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vocabs</span><span class="p">[</span><span class="s1">&#39;variable&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">varcons</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
          <span class="k">if</span> <span class="s2">&quot;height2m&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vocabs</span><span class="p">[</span><span class="s1">&#39;variable&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">varcons</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">k2</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span> <span class="s1">&#39;_dimension&#39;</span><span class="p">,[]):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;config_c4: </span><span class="si">%s</span><span class="s1"> , </span><span class="si">%s</span><span class="s1">: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">k2</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vocabs</span><span class="p">[</span><span class="s1">&#39;variable&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">varcons</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">k2</span><span class="p">][</span><span class="s1">&#39;_dimension&#39;</span><span class="p">]</span> <span class="p">)</span> <span class="p">))</span>

    <span class="c1">##assert self.project != &#39;CCMI&#39;, &#39;Not completely set up for CCMI yet&#39;</span>

  <span class="k">def</span><span class="w"> </span><span class="nf">getExtraAtts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="n">eafile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mipVocabDir</span> <span class="o">+</span> <span class="s1">&#39;extraAtts.txt&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">extraAtts</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span> <span class="n">eafile</span> <span class="p">):</span>
      <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">open</span><span class="p">(</span> <span class="n">eafile</span> <span class="p">)</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;#&#39;</span><span class="p">:</span>
          <span class="k">if</span> <span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;@&quot;</span><span class="p">:</span>
              <span class="n">p1</span><span class="p">,</span><span class="n">p2</span> <span class="o">=</span> <span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span> <span class="s1">&#39;|&#39;</span> <span class="p">)</span>
          <span class="k">else</span><span class="p">:</span>
            <span class="n">p1</span><span class="p">,</span><span class="n">p2</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">l</span>
          <span class="c1">##bits = list(map( string.strip, string.split(p2,&#39;,&#39;) ))</span>
          <span class="n">bits</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">p2</span><span class="o">.</span><span class="n">split</span><span class="p">(</span> <span class="s1">&#39;,&#39;</span> <span class="p">)]</span>
          <span class="nb">id</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">bits</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">bits</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
          <span class="k">if</span> <span class="n">p1</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">id</span> <span class="o">+=</span> <span class="s1">&#39;:</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">p1</span>
          <span class="n">ee</span> <span class="o">=</span> <span class="p">{}</span>
          <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bits</span><span class="p">[</span><span class="mi">2</span><span class="p">:]:</span>
            <span class="n">bb</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
            <span class="n">ee</span><span class="p">[</span><span class="n">bb</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">bb</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">extraAtts</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">ee</span>

  <span class="k">def</span><span class="w"> </span><span class="nf">getVocabs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
  <span class="c1">## &quot;Returns a dictionary of vocabulary details for the project provided.&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectV</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s1">&#39;SPECS&#39;</span><span class="p">:</span>
               <span class="c1">##&#39;experiment_id&#39;:utils.PatternControl( &#39;experiment_id&#39;, &quot;(?P&lt;val&gt;.*)[0-9]{4}&quot;, list=validSpecsExptFamilies ), \</span>
      <span class="n">vocabs</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;variable&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">mipVocab</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> \
               <span class="s1">&#39;Conventions&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;Conventions&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;CF-1.6&#39;</span><span class="p">]</span> <span class="p">),</span> \
               <span class="s1">&#39;frequency&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;frequency&#39;</span><span class="p">,</span> <span class="n">validSpecsFrequencies</span> <span class="p">),</span> \
               <span class="s1">&#39;experiment_id&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;experiment_id&#39;</span><span class="p">,</span> <span class="n">validSpecsExptFamilies</span> <span class="p">),</span> \
               <span class="s1">&#39;initialization_method&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">PatternControl</span><span class="p">(</span> <span class="s1">&#39;initialization_method&#39;</span><span class="p">,</span> <span class="s2">&quot;[0-9]+&quot;</span> <span class="p">),</span> \
               <span class="s1">&#39;physics_version&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">PatternControl</span><span class="p">(</span> <span class="s1">&#39;physics_version&#39;</span><span class="p">,</span> <span class="s2">&quot;[0-9]+&quot;</span> <span class="p">),</span> \
               <span class="s1">&#39;realization&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">PatternControl</span><span class="p">(</span> <span class="s1">&#39;realization&#39;</span><span class="p">,</span> <span class="s2">&quot;[0-9]+&quot;</span> <span class="p">),</span> \
               <span class="s1">&#39;startdate&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">PatternControl</span><span class="p">(</span> <span class="s1">&#39;startdate&#39;</span><span class="p">,</span> <span class="s2">&quot;S[0-9]</span><span class="si">{8}</span><span class="s2">&quot;</span> <span class="p">),</span> \
               <span class="c1">## &#39;associated_experiment&#39;:utils.PatternControl( &#39;associated_experment&#39;, &quot;(?P&lt;val&gt;(N/A|(decadal|seasonal): r\*i[0-9]{1,4}p[0-9]{1,4}))&quot; ), \</span>
               <span class="s1">&#39;project_id&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;project_id&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;SPECS&#39;</span><span class="p">,</span> <span class="s1">&#39;NMME-SPECS&#39;</span><span class="p">]</span> <span class="p">),</span> \
               <span class="c1">## &#39;institution&#39;:utils.ListControl( &#39;institution&#39;, validSpecsInstitutions ), \</span>
               <span class="s1">&#39;modeling_realm&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;realm&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">realm</span><span class="p">,</span> <span class="n">split</span><span class="o">=</span><span class="kc">True</span> <span class="p">),</span> \
             <span class="p">}</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectV</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s1">&#39;CMIP5&#39;</span><span class="p">:</span>
               <span class="c1">##&#39;experiment_id&#39;:utils.PatternControl( &#39;experiment_id&#39;, &quot;(?P&lt;val&gt;.*)[0-9]{4}&quot;, list=validSpecsExptFamilies ), \</span>
      <span class="n">lrdr</span> <span class="o">=</span> <span class="n">readVocab</span><span class="p">(</span> <span class="s1">&#39;cmip5_vocabs/&#39;</span><span class="p">)</span>
      <span class="n">vocabs</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;variable&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">mipVocab</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> \
               <span class="s1">&#39;Conventions&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;Conventions&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;CF-1.4&#39;</span><span class="p">,</span><span class="s1">&#39;CF-1.5&#39;</span><span class="p">]</span> <span class="p">),</span> \
               <span class="s1">&#39;experiment_id&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;experiment_id&#39;</span><span class="p">,</span> <span class="n">lrdr</span><span class="o">.</span><span class="n">getSimpleList</span><span class="p">(</span> <span class="s1">&#39;experiments.txt&#39;</span> <span class="p">)</span> <span class="p">),</span> \
               <span class="s1">&#39;institute_id&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;institute_id&#39;</span><span class="p">,</span> <span class="n">lrdr</span><span class="o">.</span><span class="n">getSimpleList</span><span class="p">(</span> <span class="s1">&#39;institutes.txt&#39;</span> <span class="p">)</span> <span class="p">),</span> \
               <span class="s1">&#39;model_id&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;model_id&#39;</span><span class="p">,</span> <span class="n">lrdr</span><span class="o">.</span><span class="n">getSimpleList</span><span class="p">(</span> <span class="s1">&#39;models.txt&#39;</span> <span class="p">)</span> <span class="p">),</span> \
               <span class="s1">&#39;frequency&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;frequency&#39;</span><span class="p">,</span> <span class="n">validCmip5Frequencies</span> <span class="p">),</span> \
               <span class="s1">&#39;initialization_method&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">PatternControl</span><span class="p">(</span> <span class="s1">&#39;initialization_method&#39;</span><span class="p">,</span> <span class="s2">&quot;[0-9]+&quot;</span> <span class="p">),</span> \
               <span class="s1">&#39;physics_version&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">PatternControl</span><span class="p">(</span> <span class="s1">&#39;physics_version&#39;</span><span class="p">,</span> <span class="s2">&quot;[0-9]+&quot;</span> <span class="p">),</span> \
               <span class="s1">&#39;realization&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">PatternControl</span><span class="p">(</span> <span class="s1">&#39;realization&#39;</span><span class="p">,</span> <span class="s2">&quot;[0-9]+&quot;</span> <span class="p">),</span> \
               <span class="s1">&#39;project_id&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;project_id&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;CMIP5&#39;</span><span class="p">]</span> <span class="p">),</span> \
               <span class="c1">## &#39;institution&#39;:utils.ListControl( &#39;institution&#39;, validSpecsInstitutions ), \</span>
               <span class="s1">&#39;modeling_realm&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;realm&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;atmos&#39;</span><span class="p">,</span> <span class="s1">&#39;ocean&#39;</span><span class="p">,</span> <span class="s1">&#39;land&#39;</span><span class="p">,</span> <span class="s1">&#39;landIce&#39;</span><span class="p">,</span> <span class="s1">&#39;seaIce&#39;</span><span class="p">,</span> <span class="s1">&#39;aerosol&#39;</span><span class="p">,</span> <span class="s1">&#39;atmosChem&#39;</span><span class="p">,</span> <span class="s1">&#39;ocnBgchem&#39;</span><span class="p">],</span> <span class="n">split</span><span class="o">=</span><span class="kc">True</span> <span class="p">),</span> \
             <span class="p">}</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectV</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s1">&#39;CCMI&#39;</span><span class="p">:</span>
    
      <span class="n">lrdr</span> <span class="o">=</span> <span class="n">readVocab</span><span class="p">(</span> <span class="s1">&#39;ccmi_vocabs/&#39;</span><span class="p">)</span>
      <span class="n">vocabs</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;variable&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">mipVocab</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> \
               <span class="s1">&#39;frequency&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;frequency&#39;</span><span class="p">,</span> <span class="n">validCcmiFrequencies</span> <span class="p">),</span> \
               <span class="s1">&#39;experiment_id&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;experiment_id&#39;</span><span class="p">,</span> <span class="n">lrdr</span><span class="o">.</span><span class="n">getSimpleList</span><span class="p">(</span> <span class="s1">&#39;ccmi_experiments.txt&#39;</span><span class="p">,</span> <span class="n">bit</span><span class="o">=-</span><span class="mi">1</span> <span class="p">)</span> <span class="p">),</span> \
<span class="c1">## do not preserve or check relation between model and institution.</span>
               <span class="s1">&#39;institution&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;institution&#39;</span><span class="p">,</span> <span class="n">lrdr</span><span class="o">.</span><span class="n">getSimpleList</span><span class="p">(</span> <span class="s1">&#39;models_insts.txt&#39;</span><span class="p">,</span> <span class="n">bit</span><span class="o">=</span><span class="mi">1</span> <span class="p">)</span> <span class="p">),</span> \
               <span class="s1">&#39;model_id&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;model_id&#39;</span><span class="p">,</span> <span class="n">lrdr</span><span class="o">.</span><span class="n">getSimpleList</span><span class="p">(</span> <span class="s1">&#39;models_insts.txt&#39;</span><span class="p">,</span> <span class="n">bit</span><span class="o">=</span><span class="mi">0</span> <span class="p">)</span> <span class="p">),</span> \
               <span class="s1">&#39;modeling_realm&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;realm&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;atmos&#39;</span><span class="p">,</span> <span class="s1">&#39;ocean&#39;</span><span class="p">,</span> <span class="s1">&#39;land&#39;</span><span class="p">,</span> <span class="s1">&#39;landIce&#39;</span><span class="p">,</span> <span class="s1">&#39;seaIce&#39;</span><span class="p">,</span> <span class="s1">&#39;aerosol&#39;</span><span class="p">,</span> <span class="s1">&#39;atmosChem&#39;</span><span class="p">,</span> <span class="s1">&#39;ocnBgchem&#39;</span><span class="p">]</span> <span class="p">),</span> \
               <span class="s1">&#39;project_id&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;project_id&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;CCMI&#39;</span><span class="p">]</span> <span class="p">)</span> <span class="p">}</span>

    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectV</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;snapsi&#39;</span><span class="p">,</span> <span class="s1">&#39;ramip&#39;</span><span class="p">,</span> <span class="s1">&#39;ccmi2022&#39;</span><span class="p">]:</span>
    
      <span class="n">vocabs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
      <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">thiscfg</span><span class="o">.</span><span class="n">acvs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
          <span class="k">if</span> <span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;list&#39;</span><span class="p">:</span>
              <span class="n">vocabs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="n">k</span><span class="p">,</span> <span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">split</span><span class="o">=</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;source_type&#39;</span><span class="p">]</span> <span class="p">)</span>
      <span class="n">vocabs</span><span class="p">[</span> <span class="s1">&#39;variable&#39;</span> <span class="p">]</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">mipVocab</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
      <span class="n">variant_ixs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;realization&#39;</span><span class="p">,</span> <span class="s1">&#39;initialization&#39;</span><span class="p">,</span> <span class="s1">&#39;physics&#39;</span><span class="p">,</span> <span class="s1">&#39;forcing&#39;</span><span class="p">]</span>
      <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">variant_ixs</span><span class="p">:</span>
        <span class="n">vocabs</span><span class="p">[</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">_index&#39;</span> <span class="o">%</span> <span class="n">x</span> <span class="p">]</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">NumericControl</span><span class="p">(</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">_index&#39;</span> <span class="o">%</span> <span class="n">x</span><span class="p">,</span> <span class="n">base_class</span><span class="o">=</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">integer</span><span class="p">),</span> <span class="n">min_valid</span><span class="o">=</span><span class="mi">0</span> <span class="p">)</span>

    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectV</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s1">&#39;ESA-CCI&#39;</span><span class="p">:</span>
      <span class="n">lrdr</span> <span class="o">=</span> <span class="n">readVocab</span><span class="p">(</span> <span class="s1">&#39;esacci_vocabs/&#39;</span><span class="p">)</span>
      <span class="n">cciProjectList</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ecvMappings</span> <span class="o">=</span> <span class="n">lrdr</span><span class="o">.</span><span class="n">getSimpleList</span><span class="p">(</span> <span class="s1">&#39;cciProject.txt&#39;</span><span class="p">,</span> <span class="n">bit</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="s1">&#39;returnMappings&#39;</span> <span class="p">)</span>
      <span class="n">vocabs</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;variable&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">mipVocab</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> \
               <span class="s1">&#39;version&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">PatternControl</span><span class="p">(</span> <span class="s1">&#39;version&#39;</span><span class="p">,</span>  <span class="s1">&#39;^(fv[0-9]+(\.[0-9]+){0,1})$&#39;</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;fv1.1&#39;</span><span class="p">]</span> <span class="p">),</span> \
               <span class="s1">&#39;level&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;level&#39;</span><span class="p">,</span> <span class="n">lrdr</span><span class="o">.</span><span class="n">getSimpleList</span><span class="p">(</span> <span class="s1">&#39;procLevel01.txt&#39;</span><span class="p">,</span> <span class="n">bit</span><span class="o">=</span><span class="mi">0</span> <span class="p">)</span> <span class="p">),</span> \
               <span class="s1">&#39;platform&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;platforms&#39;</span><span class="p">,</span> <span class="n">lrdr</span><span class="o">.</span><span class="n">getSimpleList</span><span class="p">(</span> <span class="s1">&#39;platforms.txt&#39;</span><span class="p">,</span> <span class="n">bit</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span> <span class="n">enumeration</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">split</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">splitVal</span><span class="o">=</span><span class="s1">&#39;,&#39;</span> <span class="p">),</span> \
               <span class="s1">&#39;institution&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;institution&#39;</span><span class="p">,</span> <span class="n">lrdr</span><span class="o">.</span><span class="n">getSimpleList</span><span class="p">(</span> <span class="s1">&#39;institutions.txt&#39;</span><span class="p">,</span> <span class="n">omt</span><span class="o">=</span><span class="s1">&#39;last&#39;</span> <span class="p">)</span> <span class="p">),</span> \
               <span class="s1">&#39;Conventions&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">PatternControl</span><span class="p">(</span> <span class="s1">&#39;Conventions&#39;</span><span class="p">,</span> <span class="s1">&#39;^CF-1.[56789](,.*){0,1}$&#39;</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;CF-1.6&#39;</span><span class="p">]</span> <span class="p">),</span> \
               <span class="s1">&#39;sensor&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;sensors&#39;</span><span class="p">,</span> <span class="n">lrdr</span><span class="o">.</span><span class="n">getSimpleList</span><span class="p">(</span> <span class="s1">&#39;sensors.txt&#39;</span><span class="p">,</span> <span class="n">bit</span><span class="o">=</span><span class="mi">0</span> <span class="p">),</span> <span class="n">enumeration</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">split</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">splitVal</span><span class="o">=</span><span class="s1">&#39;,&#39;</span> <span class="p">),</span> \
               <span class="s1">&#39;cdm_data_type&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;cdm_data_type&#39;</span><span class="p">,</span> <span class="n">lrdr</span><span class="o">.</span><span class="n">getSimpleList</span><span class="p">(</span> <span class="s1">&#39;threddsDataType.txt&#39;</span><span class="p">,</span> <span class="n">bit</span><span class="o">=</span><span class="mi">0</span> <span class="p">)</span> <span class="p">),</span> \
               <span class="s1">&#39;time_coverage_duration&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">PatternControl</span><span class="p">(</span> <span class="s1">&#39;time_coverage_duration&#39;</span><span class="p">,</span>  <span class="s1">&#39;ISO8601 duration&#39;</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="s1">&#39;ISO&#39;</span><span class="p">,</span><span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;P1Y&#39;</span><span class="p">]</span> <span class="p">),</span> \
               <span class="s1">&#39;spatial_resolution&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">PatternControl</span><span class="p">(</span> <span class="s1">&#39;spatial_resolution&#39;</span><span class="p">,</span>  <span class="s1">&#39;([0-9]+(.[0-9]+){0,1})[\s]*(km|m|degree).*&#39;</span><span class="p">,</span> <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;20km&#39;</span><span class="p">,</span><span class="s1">&#39;1 km at nadir&#39;</span><span class="p">]</span> <span class="p">),</span> \
               <span class="s1">&#39;project&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;project&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Climate Change Initiative - European Space Agency&#39;</span><span class="p">,</span><span class="s1">&#39;CLIPC&#39;</span><span class="p">,</span><span class="s1">&#39;ESA GlobSnow-2&#39;</span><span class="p">]</span> <span class="p">),</span> \
               <span class="s1">&#39;cciProject&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;cciproject&#39;</span><span class="p">,</span> <span class="n">cciProjectList</span> <span class="p">),</span> \
               <span class="s1">&#39;var&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;var&#39;</span><span class="p">,</span> <span class="n">lrdr</span><span class="o">.</span><span class="n">getSimpleList</span><span class="p">(</span> <span class="s1">&#39;variables.txt&#39;</span><span class="p">,</span> <span class="n">bit</span><span class="o">=-</span><span class="mi">1</span> <span class="p">)</span> <span class="p">)</span> \
             <span class="p">}</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectV</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s1">&#39;__dummy&#39;</span><span class="p">:</span>
      <span class="n">vocabs</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;variable&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">mipVocab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">dummy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">vocabs</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;variable&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">mipVocab</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> \
           <span class="s1">&#39;driving_experiment_name&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;driving_experiment_name&#39;</span><span class="p">,</span> <span class="n">validCordexExperiment</span> <span class="p">),</span> \
           <span class="s1">&#39;project_id&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;project_id&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;CORDEX&#39;</span><span class="p">]</span> <span class="p">),</span> \
           <span class="s1">&#39;CORDEX_domain&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;CORDEX_domain&#39;</span><span class="p">,</span>  <span class="n">validCordexDomains</span> <span class="p">),</span> \
           <span class="s1">&#39;driving_model_id&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;driving_model_id&#39;</span><span class="p">,</span>  <span class="n">validGcmNames</span> <span class="p">),</span> \
           <span class="s1">&#39;driving_model_ensemble_member&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">PatternControl</span><span class="p">(</span> <span class="s1">&#39;driving_model_ensemble_member&#39;</span><span class="p">,</span>  <span class="s1">&#39;r[0-9]+i[0-9]+p[0-9]+&#39;</span> <span class="p">),</span> \
           <span class="s1">&#39;rcm_version_id&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">PatternControl</span><span class="p">(</span> <span class="s1">&#39;rcm_version_id&#39;</span><span class="p">,</span>  <span class="s1">&#39;[a-zA-Z0-9-]+&#39;</span> <span class="p">),</span> \
           <span class="s1">&#39;model_id&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;model_id&#39;</span><span class="p">,</span>  <span class="n">validRcmNames</span> <span class="p">),</span> \
           <span class="s1">&#39;institute_id&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;institute_id&#39;</span><span class="p">,</span>  <span class="n">validInstNames</span> <span class="p">),</span> \
           <span class="s1">&#39;frequency&#39;</span><span class="p">:</span><span class="n">utils</span><span class="o">.</span><span class="n">ListControl</span><span class="p">(</span> <span class="s1">&#39;frequency&#39;</span><span class="p">,</span> <span class="n">validCordexFrequencies</span> <span class="p">)</span> <span class="p">}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">vocabs</span> <span class="o">=</span> <span class="n">vocabs</span>


  <span class="k">def</span><span class="w"> </span><span class="nf">setEsaCciFNType</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="nb">id</span><span class="p">):</span>
      <span class="k">if</span> <span class="nb">id</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]:</span>
        <span class="n">id1</span> <span class="o">=</span> <span class="mi">1</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="n">id1</span> <span class="o">=</span> <span class="nb">id</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">groupIndex</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">fnoptions</span><span class="p">[</span><span class="s1">&#39;groupIndex&#39;</span><span class="p">][</span><span class="n">id1</span><span class="p">]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">trangeIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnoptions</span><span class="p">[</span><span class="s1">&#39;trangeIndex&#39;</span><span class="p">][</span><span class="n">id1</span><span class="p">]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">globalAttributesInFn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnoptions</span><span class="p">[</span><span class="s1">&#39;inFn&#39;</span><span class="p">][</span><span class="n">id1</span><span class="p">]</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">varIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fnoptions</span><span class="p">[</span><span class="s1">&#39;varIndex&#39;</span><span class="p">][</span><span class="n">id1</span><span class="p">]</span></div>


<div class="viewcode-block" id="copy_config"><a class="viewcode-back" href="../../../index.html#ceda_cc.ceda_cc_config.config_c4.copy_config">[docs]</a><span class="k">def</span><span class="w"> </span><span class="nf">copy_config</span><span class="p">(</span><span class="n">dest_dir</span><span class="p">):</span>
<span class="w">   </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">   Copy the current default configuration directory into a separate directory.</span>

<span class="sd">   The directory &lt;ceda_cc-package-dir&gt;/config is copied to `dest_dir`.</span>
<span class="sd">   This is useful when ceda-cc is installed as a Python package and the user may</span>
<span class="sd">   not know where the config directory is stored.</span>

<span class="sd">   :param dest_dir: should be a path to a directory which does not yet exist.  </span>
<span class="sd">       The configuration directory will be copied to this path.</span>

<span class="sd">   &quot;&quot;&quot;</span>
   <span class="n">shutil</span><span class="o">.</span><span class="n">copytree</span><span class="p">(</span><span class="n">CC_CONFIG_DEFAULT_DIR</span><span class="p">,</span> <span class="n">dest_dir</span><span class="p">)</span></div>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015-2025, Centre of Environmental Data Analysis,Scientific and Technical Facilities Council (STFC),UK Research and Innovation (UKRI). BSD 2-Clause License. All rights reserved..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>