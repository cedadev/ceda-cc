<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The ceda-cc file compliance checker: technical documentation &mdash; ceda-cc 1.3.1+ documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.3.1+',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="ceda-cc 1.3.1+ documentation" href="#" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="#">ceda-cc 1.3.1+ documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="the-ceda-cc-file-compliance-checker-technical-documentation">
<h1>The ceda-cc file compliance checker: technical documentation<a class="headerlink" href="#the-ceda-cc-file-compliance-checker-technical-documentation" title="Permalink to this headline">¶</a></h1>
<p>Contents:</p>
<div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
</div>
<div class="section" id="usage-ccinit">
<h1>Usage (ccinit)<a class="headerlink" href="#usage-ccinit" title="Permalink to this headline">¶</a></h1>
<div class="section" id="calling-options">
<h2>Calling options<a class="headerlink" href="#calling-options" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Command line</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ceda-cc -p &lt;project&gt; -D &lt;directory&gt;</td>
<td>check all data in directory tree under specified directory</td>
</tr>
<tr class="row-odd"><td>ceda-cc -p &lt;project&gt; -d &lt;directory&gt;</td>
<td>check all data in specified directory</td>
</tr>
<tr class="row-even"><td>ceda-cc -p &lt;project&gt; -f &lt;file&gt;</td>
<td>check a single file</td>
</tr>
<tr class="row-odd"><td>ceda-cc &#8211;sum &lt;log file directory&gt;</td>
<td>create an overview of results</td>
</tr>
<tr class="row-even"><td>ceda-cc &#8211;copy-config-file  &lt;target diectory&gt;</td>
<td>copy configuration files to a new directory</td>
</tr>
</tbody>
</table>
<span class="target" id="module-ccinit"></span><dl class="docutils">
<dt>Arguments:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">-p:</th><td class="field-body">project</td>
</tr>
<tr class="field-even field"><th class="field-name">&#8211;copy-config:</th><td class="field-body">&lt;target directory path&gt;: copy configuration files to target directory path;</td>
</tr>
<tr class="field-odd field"><th class="field-name">&#8211;sum:</th><td class="field-body">&lt;log file directory&gt; create a summary of the results  logged in the specified directory.</td>
</tr>
<tr class="field-even field"><th class="field-name">-f:</th><td class="field-body">&lt;file&gt;: check a single file;</td>
</tr>
<tr class="field-odd field"><th class="field-name">-d:</th><td class="field-body">&lt;directory&gt;: check all the NetCDF files in a directory;</td>
</tr>
<tr class="field-even field"><th class="field-name">-D:</th><td class="field-body">&lt;directory&gt;: check all the NetCDF files in a directory tree (or latest versions if a recognised version managment system is defined for the project);</td>
</tr>
<tr class="field-odd field"><th class="field-name">&#8211;ld:</th><td class="field-body">&lt;log file directory&gt;:  ## directory to take log files;</td>
</tr>
<tr class="field-even field"><th class="field-name">-R:</th><td class="field-body">&lt;record file name&gt;: file name for file to take one record per file checked;</td>
</tr>
<tr class="field-odd field"><th class="field-name">&#8211;cae:</th><td class="field-body">&#8220;catch all errors&#8221;: will trap exceptions and record in  log files, and then continue. Default is to stop after unrecognised exceptions.</td>
</tr>
<tr class="field-even field"><th class="field-name">&#8211;log:</th><td class="field-body">&lt;single|multi&gt;:  Set log file management option &#8211; see &#8220;Single log&#8221; and &#8220;Multi-log&#8221; below.</td>
</tr>
<tr class="field-odd field"><th class="field-name">&#8211;blfmode:</th><td class="field-body">&lt;mode&gt;:    Set mode for batch log file &#8211; see log file modes</td>
</tr>
<tr class="field-even field"><th class="field-name">&#8211;flfmode:</th><td class="field-body">&lt;mode&gt;:  Set mode for file-level log file &#8211; see log file modes</td>
</tr>
<tr class="field-odd field"><th class="field-name">&#8211;aMap:</th><td class="field-body">Read in some attribute mappings and run tests with virtual substitutions;</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<div class="section" id="log-file-modes">
<h3>Log file modes<a class="headerlink" href="#log-file-modes" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>Valid modes are: &#8216;a&#8217;: append</dt>
<dd>&#8216;n&#8217;, &#8216;np&#8217;: new file, &#8216;np&#8217;: protect after closing (mode = 444)
&#8216;w&#8217;, &#8216;wo&#8217;: write (overwrite if present), &#8216;wo&#8217;: protect after closing (mode = 444)</dd>
</dl>
<p>Note that the log files generated in multi-log mode will re-use file names. If running with &#8211;flfmode set to &#8216;n&#8217;,&#8217;np&#8217; or &#8216;wo&#8217; it will be necessary to change or clear the target directory. The names of batch log files include the time, to the nearest second, when the process is started, so will not generally suffer from re-use.</p>
</div>
</div>
</div>
<div class="section" id="module-utils_c4">
<span id="utils-c4"></span><h1>utils_c4<a class="headerlink" href="#module-utils_c4" title="Permalink to this headline">¶</a></h1>
<p>A set of classes running checks and providing utilities to support checks</p>
<dl class="class">
<dt id="utils_c4.checkBase">
<em class="property">class </em><tt class="descclassname">utils_c4.</tt><tt class="descname">checkBase</tt><big>(</big><em>cls='CORDEX'</em>, <em>reportPass=True</em>, <em>parent=None</em>, <em>monitor=None</em><big>)</big><a class="reference internal" href="_modules/utils_c4.html#checkBase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils_c4.checkBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for checks, containing a set of standard methods for managing operation of checks and logging of results</p>
<dl class="method">
<dt id="utils_c4.checkBase.isInt">
<tt class="descname">isInt</tt><big>(</big><em>x</em><big>)</big><a class="reference internal" href="_modules/utils_c4.html#checkBase.isInt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils_c4.checkBase.isInt" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that a string is a representation of an integer</p>
</dd></dl>

<dl class="method">
<dt id="utils_c4.checkBase.logMessage">
<tt class="descname">logMessage</tt><big>(</big><em>msg</em>, <em>error=False</em><big>)</big><a class="reference internal" href="_modules/utils_c4.html#checkBase.logMessage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils_c4.checkBase.logMessage" title="Permalink to this definition">¶</a></dt>
<dd><p>Log messages and count messages</p>
</dd></dl>

<dl class="method">
<dt id="utils_c4.checkBase.log_error">
<tt class="descname">log_error</tt><big>(</big><em>msg</em><big>)</big><a class="reference internal" href="_modules/utils_c4.html#checkBase.log_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils_c4.checkBase.log_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an error log message and call logMessage; count errors;</p>
</dd></dl>

<dl class="method">
<dt id="utils_c4.checkBase.log_exception">
<tt class="descname">log_exception</tt><big>(</big><em>msg</em><big>)</big><a class="reference internal" href="_modules/utils_c4.html#checkBase.log_exception"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils_c4.checkBase.log_exception" title="Permalink to this definition">¶</a></dt>
<dd><p>Logging of exceptions &#8211; putting trace information in log files</p>
</dd></dl>

<dl class="method">
<dt id="utils_c4.checkBase.log_pass">
<tt class="descname">log_pass</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/utils_c4.html#checkBase.log_pass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils_c4.checkBase.log_pass" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a pass log message and call logMessage; count passes;</p>
</dd></dl>

<dl class="method">
<dt id="utils_c4.checkBase.runChecks">
<tt class="descname">runChecks</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/utils_c4.html#checkBase.runChecks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils_c4.checkBase.runChecks" title="Permalink to this definition">¶</a></dt>
<dd><p>Run all the checks registered in this instance (in self.checks) and handle exceptions</p>
</dd></dl>

<dl class="method">
<dt id="utils_c4.checkBase.test">
<tt class="descname">test</tt><big>(</big><em>res</em>, <em>msg</em>, <em>abort=False</em>, <em>part=False</em>, <em>appendLogfile=(None</em>, <em>None)</em><big>)</big><a class="reference internal" href="_modules/utils_c4.html#checkBase.test"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils_c4.checkBase.test" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle test results. 
:param res: [True/False] result of test;
:param msg: Message describing the test;
:param abort: {optional} Set True if checks should be aborted when test fails;
:param part: {optional} Set True if this is a component of a test (logging of pass suppressed);
:param appendLogfile: {optional} Allows results to be appended to pre-existing log file;</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="utils_c4.checkByVar">
<em class="property">class </em><tt class="descclassname">utils_c4.</tt><tt class="descname">checkByVar</tt><big>(</big><em>cls='CORDEX'</em>, <em>reportPass=True</em>, <em>parent=None</em>, <em>monitor=None</em><big>)</big><a class="reference internal" href="_modules/utils_c4.html#checkByVar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils_c4.checkByVar" title="Permalink to this definition">¶</a></dt>
<dd><p>Run some checks on groups of files with a common variable. Checks for continuity of time in group</p>
<dl class="method">
<dt id="utils_c4.checkByVar.checkThisTrange">
<tt class="descname">checkThisTrange</tt><big>(</big><em>tt</em>, <em>group</em><big>)</big><a class="reference internal" href="_modules/utils_c4.html#checkByVar.checkThisTrange"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils_c4.checkByVar.checkThisTrange" title="Permalink to this definition">¶</a></dt>
<dd><p>Check consistency across a list of time ranges</p>
</dd></dl>

<dl class="method">
<dt id="utils_c4.checkByVar.checkTrange">
<tt class="descname">checkTrange</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/utils_c4.html#checkByVar.checkTrange"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils_c4.checkByVar.checkTrange" title="Permalink to this definition">¶</a></dt>
<dd><p>Manage time range checks: loop over groups of files identified by <a class="reference internal" href="#utils_c4.checkByVar.impt" title="utils_c4.checkByVar.impt"><tt class="xref py py-meth docutils literal"><span class="pre">impt()</span></tt></a></p>
</dd></dl>

<dl class="method">
<dt id="utils_c4.checkByVar.impt">
<tt class="descname">impt</tt><big>(</big><em>flist</em><big>)</big><a class="reference internal" href="_modules/utils_c4.html#checkByVar.impt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils_c4.checkByVar.impt" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Scan a list of files and identify groups which a common variable and extract time ranges into a dictionary of lists, keyed on group identifiers.</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">param flist:</th><td class="field-body">List of file names.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p>This routine has rather obscure nested logical tests used to identify the group to which a file belongs. The complexity arises from the fact that the identification of the files that should form a continuous time series from the file names alone is not a standardised feature of the file names.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="utils_c4.checkFileName">
<em class="property">class </em><tt class="descclassname">utils_c4.</tt><tt class="descname">checkFileName</tt><big>(</big><em>cls='CORDEX'</em>, <em>reportPass=True</em>, <em>parent=None</em>, <em>monitor=None</em><big>)</big><a class="reference internal" href="_modules/utils_c4.html#checkFileName"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils_c4.checkFileName" title="Permalink to this definition">¶</a></dt>
<dd><p>Check basic syntax of file names (i.e. checks properties of the text string, it does not attempt to access the file).
Inherits <a class="reference internal" href="#utils_c4.checkBase" title="utils_c4.checkBase"><tt class="xref py py-class docutils literal"><span class="pre">checkBase</span></tt></a> class. Checks are run by the <a class="reference internal" href="#utils_c4.checkFileName.check" title="utils_c4.checkFileName.check"><tt class="xref py py-meth docutils literal"><span class="pre">check()</span></tt></a> method.</p>
<dl class="method">
<dt id="utils_c4.checkFileName.check">
<tt class="descname">check</tt><big>(</big><em>fn</em><big>)</big><a class="reference internal" href="_modules/utils_c4.html#checkFileName.check"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils_c4.checkFileName.check" title="Permalink to this definition">¶</a></dt>
<dd><p>Initiate checks: manage arguments and then call <em>runChecks</em> (inherited from checkBase class).
Arguments: fn: file name: the file name to be checked.</p>
</dd></dl>

<dl class="method">
<dt id="utils_c4.checkFileName.do_check_fn">
<tt class="descname">do_check_fn</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/utils_c4.html#checkFileName.do_check_fn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils_c4.checkFileName.do_check_fn" title="Permalink to this definition">¶</a></dt>
<dd><p>Basic file name checks:
(1) Check suffix;
(1b) [for ESA-CCI files] check presence of &#8220;ESACCI&#8221; and identify file naming convention;
(2) Split file name into components and check number of such components;
(3) Additional specialist checks for ESA-CCI, CORDEX, CMIP-type (for the time range).</p>
</dd></dl>

<dl class="method">
<dt id="utils_c4.checkFileName.do_check_fnextra">
<tt class="descname">do_check_fnextra</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/utils_c4.html#checkFileName.do_check_fnextra"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils_c4.checkFileName.do_check_fnextra" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether file name components match constraints &#8211; but only if those constraints are not implicitly verified through comparison with global attributes in later checks</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="utils_c4.checkGlobalAttributes">
<em class="property">class </em><tt class="descclassname">utils_c4.</tt><tt class="descname">checkGlobalAttributes</tt><big>(</big><em>cls='CORDEX'</em>, <em>reportPass=True</em>, <em>parent=None</em>, <em>monitor=None</em><big>)</big><a class="reference internal" href="_modules/utils_c4.html#checkGlobalAttributes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils_c4.checkGlobalAttributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Check global and variable attributes, using tables of valid values</p>
</dd></dl>

<dl class="class">
<dt id="utils_c4.checkStandardDims">
<em class="property">class </em><tt class="descclassname">utils_c4.</tt><tt class="descname">checkStandardDims</tt><big>(</big><em>cls='CORDEX'</em>, <em>reportPass=True</em>, <em>parent=None</em>, <em>monitor=None</em><big>)</big><a class="reference internal" href="_modules/utils_c4.html#checkStandardDims"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#utils_c4.checkStandardDims" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the dimensions which are defined in the specifications</p>
</dd></dl>

</div>
<div class="section" id="module-xceptions">
<span id="xceptions"></span><h1>xceptions<a class="headerlink" href="#module-xceptions" title="Permalink to this headline">¶</a></h1>
<p>Some exceptions used in the code</p>
<dl class="exception">
<dt id="xceptions.abortChecks">
<em class="property">exception </em><tt class="descclassname">xceptions.</tt><tt class="descname">abortChecks</tt><a class="reference internal" href="_modules/xceptions.html#abortChecks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xceptions.abortChecks" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when checks are aborted following failure of a critical test (e.g. file name cannot be parsed).</p>
</dd></dl>

<dl class="exception">
<dt id="xceptions.baseException">
<em class="property">exception </em><tt class="descclassname">xceptions.</tt><tt class="descname">baseException</tt><big>(</big><em>msg</em><big>)</big><a class="reference internal" href="_modules/xceptions.html#baseException"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xceptions.baseException" title="Permalink to this definition">¶</a></dt>
<dd><p>Basic exception for general use in code.</p>
</dd></dl>

<dl class="exception">
<dt id="xceptions.loggedException">
<em class="property">exception </em><tt class="descclassname">xceptions.</tt><tt class="descname">loggedException</tt><a class="reference internal" href="_modules/xceptions.html#loggedException"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xceptions.loggedException" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised after an exception has been caught and logged in a checking class, allowing execution to fall back to the loop over files.</p>
</dd></dl>

</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference internal" href="py-modindex.html"><em>Module Index</em></a></li>
<li><a class="reference internal" href="search.html"><em>Search Page</em></a></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">The ceda-cc file compliance checker: technical documentation</a></li>
<li><a class="reference internal" href="#usage-ccinit">Usage (ccinit)</a><ul>
<li><a class="reference internal" href="#calling-options">Calling options</a><ul>
<li><a class="reference internal" href="#log-file-modes">Log file modes</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-utils_c4">utils_c4</a></li>
<li><a class="reference internal" href="#module-xceptions">xceptions</a></li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="#">ceda-cc 1.3.1+ documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, Martin Juckes.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>